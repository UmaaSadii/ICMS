{"ast":null,"code":"import React,{useState,useEffect}from'react';import{messagingService}from'../../api/apiService';import MessageComposer from'./MessageComposer';import MessageHistory from'./MessageHistory';import CallSystem from'./CallSystem';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MessagingSystem=()=>{const[activeTab,setActiveTab]=useState('compose');const[stats,setStats]=useState({totalMessages:0,sentMessages:0,deliveredMessages:0,failedMessages:0});const[loading,setLoading]=useState(true);useEffect(()=>{const fetchStats=async()=>{try{const response=await messagingService.getCommunicationStats();setStats(response.data);}catch(error){console.error('Failed to fetch communication stats:',error);}finally{setLoading(false);}};fetchStats();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-900 mb-6\",children:\"Messaging System\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg border border-blue-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-blue-800\",children:\"Total Messages\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-blue-600\",children:loading?'...':stats.totalMessages})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 p-4 rounded-lg border border-green-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-green-800\",children:\"Delivered\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-green-600\",children:loading?'...':stats.deliveredMessages})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 p-4 rounded-lg border border-yellow-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-yellow-800\",children:\"Sent\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-yellow-600\",children:loading?'...':stats.sentMessages})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 p-4 rounded-lg border border-red-200\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-red-800\",children:\"Failed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-3xl font-bold text-red-600\",children:loading?'...':stats.failedMessages})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 mb-6\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"-mb-px flex space-x-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('compose'),className:\"\".concat(activeTab==='compose'?'border-indigo-500 text-indigo-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\" whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\"),children:\"Compose Message\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('history'),className:\"\".concat(activeTab==='history'?'border-indigo-500 text-indigo-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\" whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\"),children:\"Message History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('calls'),className:\"\".concat(activeTab==='calls'?'border-indigo-500 text-indigo-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300',\" whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm\"),children:\"Calls\"})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[activeTab==='compose'&&/*#__PURE__*/_jsx(MessageComposer,{}),activeTab==='history'&&/*#__PURE__*/_jsx(MessageHistory,{}),activeTab==='calls'&&/*#__PURE__*/_jsx(CallSystem,{})]})]});};export default MessagingSystem;","map":{"version":3,"names":["React","useState","useEffect","messagingService","MessageComposer","MessageHistory","CallSystem","jsx","_jsx","jsxs","_jsxs","MessagingSystem","activeTab","setActiveTab","stats","setStats","totalMessages","sentMessages","deliveredMessages","failedMessages","loading","setLoading","fetchStats","response","getCommunicationStats","data","error","console","className","children","onClick","concat"],"sources":["C:/UMI/Frontend/src/components/messaging/MessagingSystem.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { messagingService } from '../../api/apiService';\nimport MessageComposer from './MessageComposer';\nimport MessageHistory from './MessageHistory';\nimport CallSystem from './CallSystem';\n\nconst MessagingSystem: React.FC = () => {\n  const [activeTab, setActiveTab] = useState<'compose' | 'history' | 'calls'>('compose');\n  const [stats, setStats] = useState({\n    totalMessages: 0,\n    sentMessages: 0,\n    deliveredMessages: 0,\n    failedMessages: 0\n  });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStats = async () => {\n      try {\n        const response = await messagingService.getCommunicationStats();\n        setStats(response.data);\n      } catch (error) {\n        console.error('Failed to fetch communication stats:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStats();\n  }, []);\n\n  return (\n    <div className=\"bg-white shadow rounded-lg p-6\">\n      <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Messaging System</h2>\n      \n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n          <h3 className=\"text-lg font-medium text-blue-800\">Total Messages</h3>\n          <p className=\"text-3xl font-bold text-blue-600\">\n            {loading ? '...' : stats.totalMessages}\n          </p>\n        </div>\n        <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\n          <h3 className=\"text-lg font-medium text-green-800\">Delivered</h3>\n          <p className=\"text-3xl font-bold text-green-600\">\n            {loading ? '...' : stats.deliveredMessages}\n          </p>\n        </div>\n        <div className=\"bg-yellow-50 p-4 rounded-lg border border-yellow-200\">\n          <h3 className=\"text-lg font-medium text-yellow-800\">Sent</h3>\n          <p className=\"text-3xl font-bold text-yellow-600\">\n            {loading ? '...' : stats.sentMessages}\n          </p>\n        </div>\n        <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\n          <h3 className=\"text-lg font-medium text-red-800\">Failed</h3>\n          <p className=\"text-3xl font-bold text-red-600\">\n            {loading ? '...' : stats.failedMessages}\n          </p>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"border-b border-gray-200 mb-6\">\n        <nav className=\"-mb-px flex space-x-8\">\n          <button\n            onClick={() => setActiveTab('compose')}\n            className={`${activeTab === 'compose' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}\n          >\n            Compose Message\n          </button>\n          <button\n            onClick={() => setActiveTab('history')}\n            className={`${activeTab === 'history' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}\n          >\n            Message History\n          </button>\n          <button\n            onClick={() => setActiveTab('calls')}\n            className={`${activeTab === 'calls' ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`}\n          >\n            Calls\n          </button>\n        </nav>\n      </div>\n\n      {/* Tab Content */}\n      <div>\n        {activeTab === 'compose' && <MessageComposer />}\n        {activeTab === 'history' && <MessageHistory />}\n        {activeTab === 'calls' && <CallSystem />}\n      </div>\n    </div>\n  );\n};\n\nexport default MessagingSystem;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}