{"ast":null,"code":"import React,{useState,useEffect,useCallback,useMemo}from'react';import{studentService,courseService,departmentService}from'../../api/apiService';import StudentModal from'../modals/StudentModal';import EnhancedStudentProfile from'../EnhancedStudentProfile';import{Pie}from'react-chartjs-2';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const StudentManagement=_ref=>{let{activeTab}=_ref;const[students,setStudents]=useState([]);const[courses,setCourses]=useState([]);const[departments,setDepartments]=useState([]);const[departmentCounts,setDepartmentCounts]=useState({});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[showStudentModal,setShowStudentModal]=useState(false);const[editingStudent,setEditingStudent]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[showStudentProfile,setShowStudentProfile]=useState(false);const[viewingStudent,setViewingStudent]=useState(null);const fetchStudents=useCallback(async()=>{setLoading(true);setError(null);try{const response=await studentService.getAllStudents();setStudents(response.data);// Calculate counts per department\nconst counts={};response.data.forEach(student=>{if(student.department&&student.department.department_id){counts[student.department.department_id]=(counts[student.department.department_id]||0)+1;}});setDepartmentCounts(counts);}catch(error){setError(error.message||'Failed to fetch students');console.error('Failed to fetch students:',error);}finally{setLoading(false);}},[]);const fetchCourses=useCallback(async()=>{try{const response=await courseService.getAllCourses();setCourses(response.data);}catch(error){console.error('Failed to fetch courses:',error);}},[]);const fetchDepartments=useCallback(async()=>{try{const response=await departmentService.getAllDepartments();setDepartments(response.data);}catch(error){console.error('Failed to fetch departments:',error);}},[]);useEffect(()=>{if(activeTab==='students'){fetchStudents();fetchCourses();fetchDepartments();}},[activeTab,fetchStudents,fetchCourses,fetchDepartments]);const handleDeleteStudent=useCallback(async id=>{if(window.confirm('Are you sure you want to delete this student?')){try{await studentService.deleteStudent(id);setStudents(prev=>{const updated=prev.filter(student=>student.student_id!==id);// Recalculate counts\nconst counts={};updated.forEach(student=>{if(student.department&&student.department.department_id){counts[student.department.department_id]=(counts[student.department.department_id]||0)+1;}});setDepartmentCounts(counts);return updated;});}catch(error){setError(error.message||'Failed to delete student');console.error('Failed to delete student:',error);}}},[]);const filteredStudents=useMemo(()=>{return students.filter(student=>{var _student$department,_student$semester,_student$semester2;return student.name.toLowerCase().includes(searchTerm.toLowerCase())||student.email.toLowerCase().includes(searchTerm.toLowerCase())||((_student$department=student.department)===null||_student$department===void 0?void 0:_student$department.name.toLowerCase().includes(searchTerm.toLowerCase()))||((_student$semester=student.semester)===null||_student$semester===void 0?void 0:_student$semester.name.toLowerCase().includes(searchTerm.toLowerCase()))||((_student$semester2=student.semester)===null||_student$semester2===void 0?void 0:_student$semester2.semester_code.toLowerCase().includes(searchTerm.toLowerCase()));});},[students,searchTerm]);// Department chart data\nconst departmentChartData=useMemo(()=>{if(Object.keys(departmentCounts).length===0){return{labels:['No Data'],datasets:[{data:[100],backgroundColor:['#e5e7eb']}]};}const chartData=Object.entries(departmentCounts).map(_ref2=>{let[deptId,count]=_ref2;const dept=departments.find(d=>d.department_id===parseInt(deptId)||d.id===parseInt(deptId));return{department:(dept===null||dept===void 0?void 0:dept.name)||(dept===null||dept===void 0?void 0:dept.department_name)||\"Department \".concat(deptId),count:count};});return{labels:chartData.map(item=>item.department),datasets:[{label:'Students by Department',data:chartData.map(item=>item.count),backgroundColor:['#3B82F6','#EF4444','#10B981','#F59E0B','#8B5CF6','#06B6D4','#84CC16','#F97316','#EC4899','#6B7280'],borderWidth:2,borderColor:'#ffffff'}]};},[departmentCounts,departments]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",role:\"main\",\"aria-labelledby\":\"student-management-heading\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{id:\"student-management-heading\",className:\"text-2xl font-bold text-gray-800\",children:[\"Students (\",filteredStudents.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"student-search\",type:\"text\",placeholder:\"Search students...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\",\"aria-describedby\":\"student-search-help\"}),/*#__PURE__*/_jsx(\"span\",{id:\"student-search-help\",className:\"sr-only\",children:\"Search by student name, email, department name, or semester\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingStudent(null);setShowStudentModal(true);},className:\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\",\"aria-label\":\"Add new student\",children:\"Add Student\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg\",role:\"alert\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-800\",children:error})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow-lg border border-gray-100 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-4\",children:\"Department Statistics\"}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:\"Loading department statistics...\"})]}):Object.keys(departmentCounts).length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"No department statistics available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"Students need to be assigned to departments to see statistics\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\",children:Object.entries(departmentCounts).map(_ref3=>{let[deptId,count]=_ref3;// Find department info from the departments state\nconst dept=departments.find(d=>d.department_id===parseInt(deptId)||d.id===parseInt(deptId));const totalStudents=Object.values(departmentCounts).reduce((sum,count)=>sum+count,0);const percentage=totalStudents>0?(count/totalStudents*100).toFixed(1):'0';return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200 hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-800 text-sm\",children:(dept===null||dept===void 0?void 0:dept.name)||(dept===null||dept===void 0?void 0:dept.department_name)||\"Department \".concat(deptId)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full\",children:[percentage,\"%\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-indigo-600 mb-1\",children:count}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"students\"}),(dept===null||dept===void 0?void 0:dept.code)&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Code: \",dept.code]})]},deptId);})}),Object.keys(departmentCounts).length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Total Departments\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-gray-900\",children:Object.keys(departmentCounts).length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Total Students\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-gray-900\",children:Object.values(departmentCounts).reduce((sum,count)=>sum+count,0)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-3 rounded-lg\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Avg per Department\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-lg font-bold text-gray-900\",children:Object.keys(departmentCounts).length>0?(Object.values(departmentCounts).reduce((sum,count)=>sum+count,0)/Object.keys(departmentCounts).length).toFixed(1):'0'})]})]})}),Object.keys(departmentCounts).length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-gray-800 mb-3\",children:\"Department Distribution\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white p-4 rounded-lg border border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-64\",children:/*#__PURE__*/_jsx(Pie,{data:departmentChartData,options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{boxWidth:12,font:{size:11}}},tooltip:{callbacks:{label:function(context){const label=context.label||'';const value=context.raw;const total=Object.values(departmentCounts).reduce((sum,count)=>sum+count,0);const percentage=(value/total*100).toFixed(1);return\"\".concat(label,\": \").concat(value,\" students (\").concat(percentage,\"%)\");}}}}}})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:[\"Students (\",filteredStudents.length,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 bg-green-400 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Active\"})]})]})}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center items-center h-64\",role:\"status\",\"aria-live\":\"polite\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Loading students...\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",role:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Student\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Department\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Semester\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Batch\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Contact\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Performance\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredStudents.map((student,index)=>{var _student$gpa,_student$attendance_p;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-200 \".concat(index%2===0?'bg-gray-50/30':'bg-white'),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-10 w-10\",children:student.image?/*#__PURE__*/_jsx(\"img\",{className:\"h-10 w-10 rounded-full object-cover\",src:student.image,alt:\"\".concat(student.name,\" profile\")}):/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-medium text-sm\",\"aria-hidden\":\"true\",children:student.name.charAt(0).toUpperCase()})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold text-gray-900\",children:student.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full inline-block\",children:[\"ID: \",student.student_id]})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:student.department?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 px-3 py-2 rounded-lg border border-green-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-green-900\",children:student.department.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-green-600 text-xs\",children:student.department.code})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 bg-gray-100 px-3 py-2 rounded-lg\",children:\"Not assigned\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:student.semester?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 px-3 py-2 rounded-lg border border-purple-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-purple-900\",children:student.semester.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-purple-600 text-xs\",children:student.semester.semester_code})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 bg-gray-100 px-3 py-2 rounded-lg\",children:\"Not assigned\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\",children:student.batch?/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 px-3 py-2 rounded-lg border border-blue-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-blue-900\",children:student.batch})}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 bg-gray-100 px-3 py-2 rounded-lg\",children:\"Not assigned\"})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:student.email}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:student.phone})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-green-400 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"GPA:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-gray-900\",children:((_student$gpa=student.gpa)===null||_student$gpa===void 0?void 0:_student$gpa.toFixed(2))||'N/A'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-blue-400 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Attendance:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-gray-900\",children:[((_student$attendance_p=student.attendance_percentage)===null||_student$attendance_p===void 0?void 0:_student$attendance_p.toFixed(1))||'N/A',\"%\"]})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setViewingStudent(student);setShowStudentProfile(true);},className:\"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 focus:text-blue-900 focus:bg-blue-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg\",\"aria-label\":\"View profile of \".concat(student.name),title:\"View Profile\",children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingStudent(student);setShowStudentModal(true);},className:\"p-2 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 focus:text-indigo-900 focus:bg-indigo-50 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg\",\"aria-label\":\"Edit student \".concat(student.name),title:\"Edit Student\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteStudent(student.student_id),className:\"p-2 text-red-600 hover:text-red-900 hover:bg-red-50 focus:text-red-900 focus:bg-red-50 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded-lg\",\"aria-label\":\"Delete student \".concat(student.name),title:\"Delete Student\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})})]},student.student_id);})})]})}),filteredStudents.length===0&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",role:\"status\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-.98-5.5-2.5m-.5-4h.01\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No students found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:searchTerm?'Try adjusting your search terms.':'Get started by adding a new student.'})]})]}),showStudentModal&&/*#__PURE__*/_jsx(StudentModal,{isOpen:showStudentModal,studentId:editingStudent?editingStudent.student_id:undefined,onClose:()=>{setShowStudentModal(false);setEditingStudent(null);},onSuccess:()=>{fetchStudents();}}),showStudentProfile&&viewingStudent&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg max-w-7xl w-full max-h-[95vh] overflow-y-auto\",children:/*#__PURE__*/_jsx(EnhancedStudentProfile,{studentId:viewingStudent.student_id,onClose:()=>{setShowStudentProfile(false);setViewingStudent(null);}})})})]});};export default/*#__PURE__*/React.memo(StudentManagement);","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","studentService","courseService","departmentService","StudentModal","EnhancedStudentProfile","Pie","jsxs","_jsxs","jsx","_jsx","StudentManagement","_ref","activeTab","students","setStudents","courses","setCourses","departments","setDepartments","departmentCounts","setDepartmentCounts","loading","setLoading","error","setError","showStudentModal","setShowStudentModal","editingStudent","setEditingStudent","searchTerm","setSearchTerm","showStudentProfile","setShowStudentProfile","viewingStudent","setViewingStudent","fetchStudents","response","getAllStudents","data","counts","forEach","student","department","department_id","message","console","fetchCourses","getAllCourses","fetchDepartments","getAllDepartments","handleDeleteStudent","id","window","confirm","deleteStudent","prev","updated","filter","student_id","filteredStudents","_student$department","_student$semester","_student$semester2","name","toLowerCase","includes","email","semester","semester_code","departmentChartData","Object","keys","length","labels","datasets","backgroundColor","chartData","entries","map","_ref2","deptId","count","dept","find","d","parseInt","department_name","concat","item","label","borderWidth","borderColor","className","role","children","type","placeholder","value","onChange","e","target","onClick","viewBox","fill","fillRule","clipRule","stroke","strokeLinecap","strokeLinejoin","strokeWidth","_ref3","totalStudents","values","reduce","sum","percentage","toFixed","code","options","responsive","maintainAspectRatio","plugins","legend","position","boxWidth","font","size","tooltip","callbacks","context","raw","total","scope","index","_student$gpa","_student$attendance_p","image","src","alt","charAt","toUpperCase","batch","phone","gpa","attendance_percentage","title","xmlns","isOpen","studentId","undefined","onClose","onSuccess","memo"],"sources":["C:/UMI/Frontend/src/components/pages/StudentManagement.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { studentService, courseService, departmentService } from '../../api/apiService';\nimport StudentModal from '../modals/StudentModal';\nimport EnhancedStudentProfile from '../EnhancedStudentProfile';\nimport { Pie } from 'react-chartjs-2';\n\ninterface Course {\n  course_id: number;\n  name: string;\n  code: string;\n  description?: string;\n}\n\ninterface Department {\n  department_id: number;\n  name: string;\n  code: string;\n  description: string;\n}\n\ninterface Student {\n  student_id: number;\n  id?: number;\n  name: string;\n  email: string;\n  phone: string;\n  department?: Department | null;\n  semester?: { semester_id: number; name: string; semester_code: string } | null;\n  batch?: string;\n  father_guardian: string;\n  image?: string;\n  attendance_percentage: number;\n  gpa: number;\n  performance_notes?: string;\n}\n\ninterface StudentManagementProps {\n  activeTab: string;\n}\n\nconst StudentManagement: React.FC<StudentManagementProps> = ({ activeTab }) => {\n  const [students, setStudents] = useState<Student[]>([]);\n  const [courses, setCourses] = useState<Course[]>([]);\n  const [departments, setDepartments] = useState<any[]>([]);\n  const [departmentCounts, setDepartmentCounts] = useState<Record<number, number>>({});\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [showStudentModal, setShowStudentModal] = useState<boolean>(false);\n  const [editingStudent, setEditingStudent] = useState<Student | null>(null);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [showStudentProfile, setShowStudentProfile] = useState<boolean>(false);\n  const [viewingStudent, setViewingStudent] = useState<Student | null>(null);\n\n  const fetchStudents = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const response = await studentService.getAllStudents();\n      setStudents(response.data);\n\n      // Calculate counts per department\n      const counts: Record<number, number> = {};\n      response.data.forEach((student: Student) => {\n        if (student.department && student.department.department_id) {\n          counts[student.department.department_id] = (counts[student.department.department_id] || 0) + 1;\n        }\n      });\n      setDepartmentCounts(counts);\n\n    } catch (error: any) {\n      setError(error.message || 'Failed to fetch students');\n      console.error('Failed to fetch students:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const fetchCourses = useCallback(async () => {\n    try {\n      const response = await courseService.getAllCourses();\n      setCourses(response.data);\n    } catch (error: any) {\n      console.error('Failed to fetch courses:', error);\n    }\n  }, []);\n\n  const fetchDepartments = useCallback(async () => {\n    try {\n      const response = await departmentService.getAllDepartments();\n      setDepartments(response.data);\n    } catch (error: any) {\n      console.error('Failed to fetch departments:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (activeTab === 'students') {\n      fetchStudents();\n      fetchCourses();\n      fetchDepartments();\n    }\n  }, [activeTab, fetchStudents, fetchCourses, fetchDepartments]);\n\n  const handleDeleteStudent = useCallback(async (id: number) => {\n    if (window.confirm('Are you sure you want to delete this student?')) {\n      try {\n        await studentService.deleteStudent(id);\n        setStudents(prev => {\n          const updated = prev.filter(student => student.student_id !== id);\n          // Recalculate counts\n          const counts: Record<number, number> = {};\n          updated.forEach((student: Student) => {\n            if (student.department && student.department.department_id) {\n              counts[student.department.department_id] = (counts[student.department.department_id] || 0) + 1;\n            }\n          });\n          setDepartmentCounts(counts);\n          return updated;\n        });\n      } catch (error: any) {\n        setError(error.message || 'Failed to delete student');\n        console.error('Failed to delete student:', error);\n      }\n    }\n  }, []);\n\n  const filteredStudents = useMemo(() => {\n    return students.filter(student =>\n      student.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      student.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      student.department?.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      student.semester?.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      student.semester?.semester_code.toLowerCase().includes(searchTerm.toLowerCase())\n    );\n  }, [students, searchTerm]);\n\n  // Department chart data\n  const departmentChartData = useMemo(() => {\n    if (Object.keys(departmentCounts).length === 0) {\n      return {\n        labels: ['No Data'],\n        datasets: [{\n          data: [100],\n          backgroundColor: ['#e5e7eb']\n        }]\n      };\n    }\n\n    const chartData = Object.entries(departmentCounts).map(([deptId, count]) => {\n      const dept = departments.find(d => d.department_id === parseInt(deptId) || d.id === parseInt(deptId));\n      return {\n        department: dept?.name || dept?.department_name || `Department ${deptId}`,\n        count: count as number\n      };\n    });\n\n    return {\n      labels: chartData.map(item => item.department),\n      datasets: [{\n        label: 'Students by Department',\n        data: chartData.map(item => item.count),\n        backgroundColor: [\n          '#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6',\n          '#06B6D4', '#84CC16', '#F97316', '#EC4899', '#6B7280'\n        ],\n        borderWidth: 2,\n        borderColor: '#ffffff'\n      }]\n    };\n  }, [departmentCounts, departments]);\n\n  return (\n    <div className=\"p-6\" role=\"main\" aria-labelledby=\"student-management-heading\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 id=\"student-management-heading\" className=\"text-2xl font-bold text-gray-800\">\n          Students ({filteredStudents.length})\n        </h2>\n        <div className=\"flex space-x-4\">\n          <input\n            id=\"student-search\"\n            type=\"text\"\n            placeholder=\"Search students...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n            aria-describedby=\"student-search-help\"\n          />\n          <span id=\"student-search-help\" className=\"sr-only\">\n            Search by student name, email, department name, or semester\n          </span>\n          <button\n            onClick={() => {\n              setEditingStudent(null);\n              setShowStudentModal(true);\n            }}\n            className=\"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n            aria-label=\"Add new student\"\n          >\n            Add Student\n          </button>\n        </div>\n      </div>\n\n      {/* Error Alert */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg\" role=\"alert\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0\">\n              <svg className=\"h-5 w-5 text-red-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n              </svg>\n            </div>\n            <div className=\"ml-3\">\n              <p className=\"text-sm text-red-800\">{error}</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Department Statistics */}\n      <div className=\"bg-white p-6 rounded-xl shadow-lg border border-gray-100 mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">Department Statistics</h3>\n        {loading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"></div>\n            <span className=\"ml-2 text-gray-600\">Loading department statistics...</span>\n          </div>\n        ) : Object.keys(departmentCounts).length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500\">\n            <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n            </svg>\n            <p className=\"mt-2\">No department statistics available</p>\n            <p className=\"text-sm\">Students need to be assigned to departments to see statistics</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {Object.entries(departmentCounts).map(([deptId, count]) => {\n              // Find department info from the departments state\n              const dept = departments.find(d => d.department_id === parseInt(deptId) || d.id === parseInt(deptId));\n              const totalStudents = Object.values(departmentCounts).reduce((sum, count) => sum + count, 0);\n              const percentage = totalStudents > 0 ? ((count / totalStudents) * 100).toFixed(1) : '0';\n\n              return (\n                <div key={deptId} className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200 hover:shadow-md transition-shadow\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <h4 className=\"font-semibold text-gray-800 text-sm\">\n                      {dept?.name || dept?.department_name || `Department ${deptId}`}\n                    </h4>\n                    <span className=\"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full\">\n                      {percentage}%\n                    </span>\n                  </div>\n                  <p className=\"text-2xl font-bold text-indigo-600 mb-1\">{count}</p>\n                  <p className=\"text-sm text-gray-600\">students</p>\n                  {dept?.code && (\n                    <p className=\"text-xs text-gray-500 mt-1\">Code: {dept.code}</p>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Summary Statistics */}\n        {Object.keys(departmentCounts).length > 0 && (\n          <div className=\"mt-6 pt-4 border-t border-gray-200\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\">\n              <div className=\"bg-gray-50 p-3 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Total Departments</p>\n                <p className=\"text-lg font-bold text-gray-900\">{Object.keys(departmentCounts).length}</p>\n              </div>\n              <div className=\"bg-gray-50 p-3 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Total Students</p>\n                <p className=\"text-lg font-bold text-gray-900\">{Object.values(departmentCounts).reduce((sum, count) => sum + count, 0)}</p>\n              </div>\n              <div className=\"bg-gray-50 p-3 rounded-lg\">\n                <p className=\"text-sm text-gray-600\">Avg per Department</p>\n                <p className=\"text-lg font-bold text-gray-900\">\n                  {Object.keys(departmentCounts).length > 0\n                    ? (Object.values(departmentCounts).reduce((sum, count) => sum + count, 0) / Object.keys(departmentCounts).length).toFixed(1)\n                    : '0'\n                  }\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Department Distribution Chart */}\n        {Object.keys(departmentCounts).length > 0 && (\n          <div className=\"mt-6\">\n            <h4 className=\"text-md font-semibold text-gray-800 mb-3\">Department Distribution</h4>\n            <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n              <div className=\"h-64\">\n                <Pie\n                  data={departmentChartData}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                      legend: {\n                        position: 'bottom',\n                        labels: {\n                          boxWidth: 12,\n                          font: { size: 11 }\n                        }\n                      },\n                      tooltip: {\n                        callbacks: {\n                          label: function(context) {\n                            const label = context.label || '';\n                            const value = context.raw as number;\n                            const total = Object.values(departmentCounts).reduce((sum, count) => sum + count, 0);\n                            const percentage = ((value / total) * 100).toFixed(1);\n                            return `${label}: ${value} students (${percentage}%)`;\n                          }\n                        }\n                      }\n                    }\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Students Table */}\n      <div className=\"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-lg font-semibold text-gray-800\">\n              Students ({filteredStudents.length})\n            </h3>\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-3 h-3 bg-green-400 rounded-full\"></div>\n              <span className=\"text-sm text-gray-600\">Active</span>\n            </div>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center items-center h-64\" role=\"status\" aria-live=\"polite\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\n            <span className=\"sr-only\">Loading students...</span>\n          </div>\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\" role=\"table\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Student\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Department\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Semester\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Batch\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Contact\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Performance\n                  </th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredStudents.map((student, index) => (\n                  <tr key={student.student_id} className={`hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-200 ${index % 2 === 0 ? 'bg-gray-50/30' : 'bg-white'}`}>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 h-10 w-10\">\n                          {student.image ? (\n                            <img\n                              className=\"h-10 w-10 rounded-full object-cover\"\n                              src={student.image}\n                              alt={`${student.name} profile`}\n                            />\n                          ) : (\n                            <div className=\"h-10 w-10 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center\">\n                              <span className=\"text-white font-medium text-sm\" aria-hidden=\"true\">\n                                {student.name.charAt(0).toUpperCase()}\n                              </span>\n                            </div>\n                          )}\n                        </div>\n                        <div className=\"ml-4\">\n                          <div className=\"text-sm font-semibold text-gray-900\">{student.name}</div>\n                          <div className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full inline-block\">ID: {student.student_id}</div>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {student.department ? (\n                        <div className=\"bg-green-50 px-3 py-2 rounded-lg border border-green-200\">\n                          <div className=\"font-semibold text-green-900\">{student.department.name}</div>\n                          <div className=\"text-green-600 text-xs\">{student.department.code}</div>\n                        </div>\n                      ) : (\n                        <span className=\"text-gray-400 bg-gray-100 px-3 py-2 rounded-lg\">Not assigned</span>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {student.semester ? (\n                        <div className=\"bg-purple-50 px-3 py-2 rounded-lg border border-purple-200\">\n                          <div className=\"font-semibold text-purple-900\">{student.semester.name}</div>\n                          <div className=\"text-purple-600 text-xs\">{student.semester.semester_code}</div>\n                        </div>\n                      ) : (\n                        <span className=\"text-gray-400 bg-gray-100 px-3 py-2 rounded-lg\">Not assigned</span>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                      {student.batch ? (\n                        <div className=\"bg-blue-50 px-3 py-2 rounded-lg border border-blue-200\">\n                          <div className=\"font-semibold text-blue-900\">{student.batch}</div>\n                        </div>\n                      ) : (\n                        <span className=\"text-gray-400 bg-gray-100 px-3 py-2 rounded-lg\">Not assigned</span>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm text-gray-900\">{student.email}</div>\n                      <div className=\"text-sm text-gray-500\">{student.phone}</div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\n                          <span className=\"text-sm text-gray-600\">GPA:</span>\n                          <span className=\"font-semibold text-gray-900\">{student.gpa?.toFixed(2) || 'N/A'}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"w-2 h-2 bg-blue-400 rounded-full\"></div>\n                          <span className=\"text-sm text-gray-600\">Attendance:</span>\n                          <span className=\"font-semibold text-gray-900\">{student.attendance_percentage?.toFixed(1) || 'N/A'}%</span>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <div className=\"flex items-center space-x-2\">\n                        <button\n                          onClick={() => {\n                            setViewingStudent(student);\n                            setShowStudentProfile(true);\n                          }}\n                          className=\"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 focus:text-blue-900 focus:bg-blue-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-lg\"\n                          aria-label={`View profile of ${student.name}`}\n                          title=\"View Profile\"\n                        >\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                          </svg>\n                        </button>\n                        <button\n                          onClick={() => {\n                            setEditingStudent(student);\n                            setShowStudentModal(true);\n                          }}\n                          className=\"p-2 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 focus:text-indigo-900 focus:bg-indigo-50 transition-colors focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 rounded-lg\"\n                          aria-label={`Edit student ${student.name}`}\n                          title=\"Edit Student\"\n                        >\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                          </svg>\n                        </button>\n                        <button\n                          onClick={() => handleDeleteStudent(student.student_id)}\n                          className=\"p-2 text-red-600 hover:text-red-900 hover:bg-red-50 focus:text-red-900 focus:bg-red-50 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 rounded-lg\"\n                          aria-label={`Delete student ${student.name}`}\n                          title=\"Delete Student\"\n                        >\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                          </svg>\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n\n        {filteredStudents.length === 0 && !loading && (\n          <div className=\"text-center py-12\" role=\"status\">\n            <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-.98-5.5-2.5m-.5-4h.01\" />\n            </svg>\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No students found</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              {searchTerm ? 'Try adjusting your search terms.' : 'Get started by adding a new student.'}\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* Student Modal */}\n      {showStudentModal && (\n        <StudentModal\n          isOpen={showStudentModal}\n          studentId={editingStudent ? editingStudent.student_id : undefined}\n          onClose={() => {\n            setShowStudentModal(false);\n            setEditingStudent(null);\n          }}\n          onSuccess={() => {\n            fetchStudents();\n          }}\n        />\n      )}\n\n      {/* Student Profile Modal */}\n      {showStudentProfile && viewingStudent && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2\">\n          <div className=\"bg-white rounded-lg max-w-7xl w-full max-h-[95vh] overflow-y-auto\">\n            <EnhancedStudentProfile\n              studentId={viewingStudent.student_id}\n              onClose={() => {\n                setShowStudentProfile(false);\n                setViewingStudent(null);\n              }}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(StudentManagement);\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,CAAEC,OAAO,KAAQ,OAAO,CACxE,OAASC,cAAc,CAAEC,aAAa,CAAEC,iBAAiB,KAAQ,sBAAsB,CACvF,MAAO,CAAAC,YAAY,KAAM,wBAAwB,CACjD,MAAO,CAAAC,sBAAsB,KAAM,2BAA2B,CAC9D,OAASC,GAAG,KAAQ,iBAAiB,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAoCtC,KAAM,CAAAC,iBAAmD,CAAGC,IAAA,EAAmB,IAAlB,CAAEC,SAAU,CAAC,CAAAD,IAAA,CACxE,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAY,EAAE,CAAC,CACvD,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAW,EAAE,CAAC,CACpD,KAAM,CAACqB,WAAW,CAAEC,cAAc,CAAC,CAAGtB,QAAQ,CAAQ,EAAE,CAAC,CACzD,KAAM,CAACuB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGxB,QAAQ,CAAyB,CAAC,CAAC,CAAC,CACpF,KAAM,CAACyB,OAAO,CAAEC,UAAU,CAAC,CAAG1B,QAAQ,CAAU,KAAK,CAAC,CACtD,KAAM,CAAC2B,KAAK,CAAEC,QAAQ,CAAC,CAAG5B,QAAQ,CAAgB,IAAI,CAAC,CACvD,KAAM,CAAC6B,gBAAgB,CAAEC,mBAAmB,CAAC,CAAG9B,QAAQ,CAAU,KAAK,CAAC,CACxE,KAAM,CAAC+B,cAAc,CAAEC,iBAAiB,CAAC,CAAGhC,QAAQ,CAAiB,IAAI,CAAC,CAC1E,KAAM,CAACiC,UAAU,CAAEC,aAAa,CAAC,CAAGlC,QAAQ,CAAS,EAAE,CAAC,CACxD,KAAM,CAACmC,kBAAkB,CAAEC,qBAAqB,CAAC,CAAGpC,QAAQ,CAAU,KAAK,CAAC,CAC5E,KAAM,CAACqC,cAAc,CAAEC,iBAAiB,CAAC,CAAGtC,QAAQ,CAAiB,IAAI,CAAC,CAE1E,KAAM,CAAAuC,aAAa,CAAGrC,WAAW,CAAC,SAAY,CAC5CwB,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CACF,KAAM,CAAAY,QAAQ,CAAG,KAAM,CAAApC,cAAc,CAACqC,cAAc,CAAC,CAAC,CACtDvB,WAAW,CAACsB,QAAQ,CAACE,IAAI,CAAC,CAE1B;AACA,KAAM,CAAAC,MAA8B,CAAG,CAAC,CAAC,CACzCH,QAAQ,CAACE,IAAI,CAACE,OAAO,CAAEC,OAAgB,EAAK,CAC1C,GAAIA,OAAO,CAACC,UAAU,EAAID,OAAO,CAACC,UAAU,CAACC,aAAa,CAAE,CAC1DJ,MAAM,CAACE,OAAO,CAACC,UAAU,CAACC,aAAa,CAAC,CAAG,CAACJ,MAAM,CAACE,OAAO,CAACC,UAAU,CAACC,aAAa,CAAC,EAAI,CAAC,EAAI,CAAC,CAChG,CACF,CAAC,CAAC,CACFvB,mBAAmB,CAACmB,MAAM,CAAC,CAE7B,CAAE,MAAOhB,KAAU,CAAE,CACnBC,QAAQ,CAACD,KAAK,CAACqB,OAAO,EAAI,0BAA0B,CAAC,CACrDC,OAAO,CAACtB,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CAAC,OAAS,CACRD,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAwB,YAAY,CAAGhD,WAAW,CAAC,SAAY,CAC3C,GAAI,CACF,KAAM,CAAAsC,QAAQ,CAAG,KAAM,CAAAnC,aAAa,CAAC8C,aAAa,CAAC,CAAC,CACpD/B,UAAU,CAACoB,QAAQ,CAACE,IAAI,CAAC,CAC3B,CAAE,MAAOf,KAAU,CAAE,CACnBsB,OAAO,CAACtB,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAClD,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAyB,gBAAgB,CAAGlD,WAAW,CAAC,SAAY,CAC/C,GAAI,CACF,KAAM,CAAAsC,QAAQ,CAAG,KAAM,CAAAlC,iBAAiB,CAAC+C,iBAAiB,CAAC,CAAC,CAC5D/B,cAAc,CAACkB,QAAQ,CAACE,IAAI,CAAC,CAC/B,CAAE,MAAOf,KAAU,CAAE,CACnBsB,OAAO,CAACtB,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACtD,CACF,CAAC,CAAE,EAAE,CAAC,CAEN1B,SAAS,CAAC,IAAM,CACd,GAAIe,SAAS,GAAK,UAAU,CAAE,CAC5BuB,aAAa,CAAC,CAAC,CACfW,YAAY,CAAC,CAAC,CACdE,gBAAgB,CAAC,CAAC,CACpB,CACF,CAAC,CAAE,CAACpC,SAAS,CAAEuB,aAAa,CAAEW,YAAY,CAAEE,gBAAgB,CAAC,CAAC,CAE9D,KAAM,CAAAE,mBAAmB,CAAGpD,WAAW,CAAC,KAAO,CAAAqD,EAAU,EAAK,CAC5D,GAAIC,MAAM,CAACC,OAAO,CAAC,+CAA+C,CAAC,CAAE,CACnE,GAAI,CACF,KAAM,CAAArD,cAAc,CAACsD,aAAa,CAACH,EAAE,CAAC,CACtCrC,WAAW,CAACyC,IAAI,EAAI,CAClB,KAAM,CAAAC,OAAO,CAAGD,IAAI,CAACE,MAAM,CAAChB,OAAO,EAAIA,OAAO,CAACiB,UAAU,GAAKP,EAAE,CAAC,CACjE;AACA,KAAM,CAAAZ,MAA8B,CAAG,CAAC,CAAC,CACzCiB,OAAO,CAAChB,OAAO,CAAEC,OAAgB,EAAK,CACpC,GAAIA,OAAO,CAACC,UAAU,EAAID,OAAO,CAACC,UAAU,CAACC,aAAa,CAAE,CAC1DJ,MAAM,CAACE,OAAO,CAACC,UAAU,CAACC,aAAa,CAAC,CAAG,CAACJ,MAAM,CAACE,OAAO,CAACC,UAAU,CAACC,aAAa,CAAC,EAAI,CAAC,EAAI,CAAC,CAChG,CACF,CAAC,CAAC,CACFvB,mBAAmB,CAACmB,MAAM,CAAC,CAC3B,MAAO,CAAAiB,OAAO,CAChB,CAAC,CAAC,CACJ,CAAE,MAAOjC,KAAU,CAAE,CACnBC,QAAQ,CAACD,KAAK,CAACqB,OAAO,EAAI,0BAA0B,CAAC,CACrDC,OAAO,CAACtB,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CACF,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAoC,gBAAgB,CAAG5D,OAAO,CAAC,IAAM,CACrC,MAAO,CAAAc,QAAQ,CAAC4C,MAAM,CAAChB,OAAO,OAAAmB,mBAAA,CAAAC,iBAAA,CAAAC,kBAAA,OAC5B,CAAArB,OAAO,CAACsB,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,UAAU,CAACmC,WAAW,CAAC,CAAC,CAAC,EAC7DvB,OAAO,CAACyB,KAAK,CAACF,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,UAAU,CAACmC,WAAW,CAAC,CAAC,CAAC,IAAAJ,mBAAA,CAC9DnB,OAAO,CAACC,UAAU,UAAAkB,mBAAA,iBAAlBA,mBAAA,CAAoBG,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,UAAU,CAACmC,WAAW,CAAC,CAAC,CAAC,KAAAH,iBAAA,CACzEpB,OAAO,CAAC0B,QAAQ,UAAAN,iBAAA,iBAAhBA,iBAAA,CAAkBE,IAAI,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,UAAU,CAACmC,WAAW,CAAC,CAAC,CAAC,KAAAF,kBAAA,CACvErB,OAAO,CAAC0B,QAAQ,UAAAL,kBAAA,iBAAhBA,kBAAA,CAAkBM,aAAa,CAACJ,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACpC,UAAU,CAACmC,WAAW,CAAC,CAAC,CAAC,GAClF,CAAC,CACH,CAAC,CAAE,CAACnD,QAAQ,CAAEgB,UAAU,CAAC,CAAC,CAE1B;AACA,KAAM,CAAAwC,mBAAmB,CAAGtE,OAAO,CAAC,IAAM,CACxC,GAAIuE,MAAM,CAACC,IAAI,CAACpD,gBAAgB,CAAC,CAACqD,MAAM,GAAK,CAAC,CAAE,CAC9C,MAAO,CACLC,MAAM,CAAE,CAAC,SAAS,CAAC,CACnBC,QAAQ,CAAE,CAAC,CACTpC,IAAI,CAAE,CAAC,GAAG,CAAC,CACXqC,eAAe,CAAE,CAAC,SAAS,CAC7B,CAAC,CACH,CAAC,CACH,CAEA,KAAM,CAAAC,SAAS,CAAGN,MAAM,CAACO,OAAO,CAAC1D,gBAAgB,CAAC,CAAC2D,GAAG,CAACC,KAAA,EAAqB,IAApB,CAACC,MAAM,CAAEC,KAAK,CAAC,CAAAF,KAAA,CACrE,KAAM,CAAAG,IAAI,CAAGjE,WAAW,CAACkE,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACzC,aAAa,GAAK0C,QAAQ,CAACL,MAAM,CAAC,EAAII,CAAC,CAACjC,EAAE,GAAKkC,QAAQ,CAACL,MAAM,CAAC,CAAC,CACrG,MAAO,CACLtC,UAAU,CAAE,CAAAwC,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEnB,IAAI,IAAImB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,eAAe,iBAAAC,MAAA,CAAkBP,MAAM,CAAE,CACzEC,KAAK,CAAEA,KACT,CAAC,CACH,CAAC,CAAC,CAEF,MAAO,CACLR,MAAM,CAAEG,SAAS,CAACE,GAAG,CAACU,IAAI,EAAIA,IAAI,CAAC9C,UAAU,CAAC,CAC9CgC,QAAQ,CAAE,CAAC,CACTe,KAAK,CAAE,wBAAwB,CAC/BnD,IAAI,CAAEsC,SAAS,CAACE,GAAG,CAACU,IAAI,EAAIA,IAAI,CAACP,KAAK,CAAC,CACvCN,eAAe,CAAE,CACf,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CACrD,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CACtD,CACDe,WAAW,CAAE,CAAC,CACdC,WAAW,CAAE,SACf,CAAC,CACH,CAAC,CACH,CAAC,CAAE,CAACxE,gBAAgB,CAAEF,WAAW,CAAC,CAAC,CAEnC,mBACEV,KAAA,QAAKqF,SAAS,CAAC,KAAK,CAACC,IAAI,CAAC,MAAM,CAAC,kBAAgB,4BAA4B,CAAAC,QAAA,eAC3EvF,KAAA,QAAKqF,SAAS,CAAC,wCAAwC,CAAAE,QAAA,eACrDvF,KAAA,OAAI4C,EAAE,CAAC,4BAA4B,CAACyC,SAAS,CAAC,kCAAkC,CAAAE,QAAA,EAAC,YACrE,CAACnC,gBAAgB,CAACa,MAAM,CAAC,GACrC,EAAI,CAAC,cACLjE,KAAA,QAAKqF,SAAS,CAAC,gBAAgB,CAAAE,QAAA,eAC7BrF,IAAA,UACE0C,EAAE,CAAC,gBAAgB,CACnB4C,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,oBAAoB,CAChCC,KAAK,CAAEpE,UAAW,CAClBqE,QAAQ,CAAGC,CAAC,EAAKrE,aAAa,CAACqE,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC/CL,SAAS,CAAC,mGAAmG,CAC7G,mBAAiB,qBAAqB,CACvC,CAAC,cACFnF,IAAA,SAAM0C,EAAE,CAAC,qBAAqB,CAACyC,SAAS,CAAC,SAAS,CAAAE,QAAA,CAAC,6DAEnD,CAAM,CAAC,cACPrF,IAAA,WACE4F,OAAO,CAAEA,CAAA,GAAM,CACbzE,iBAAiB,CAAC,IAAI,CAAC,CACvBF,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAE,CACFkE,SAAS,CAAC,6IAA6I,CACvJ,aAAW,iBAAiB,CAAAE,QAAA,CAC7B,aAED,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CAGLvE,KAAK,eACJd,IAAA,QAAKmF,SAAS,CAAC,qDAAqD,CAACC,IAAI,CAAC,OAAO,CAAAC,QAAA,cAC/EvF,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAE,QAAA,eACnBrF,IAAA,QAAKmF,SAAS,CAAC,eAAe,CAAAE,QAAA,cAC5BrF,IAAA,QAAKmF,SAAS,CAAC,sBAAsB,CAACU,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,cAAc,CAAAT,QAAA,cAC3ErF,IAAA,SAAM+F,QAAQ,CAAC,SAAS,CAACpB,CAAC,CAAC,yNAAyN,CAACqB,QAAQ,CAAC,SAAS,CAAE,CAAC,CACvQ,CAAC,CACH,CAAC,cACNhG,IAAA,QAAKmF,SAAS,CAAC,MAAM,CAAAE,QAAA,cACnBrF,IAAA,MAAGmF,SAAS,CAAC,sBAAsB,CAAAE,QAAA,CAAEvE,KAAK,CAAI,CAAC,CAC5C,CAAC,EACH,CAAC,CACH,CACN,cAGDhB,KAAA,QAAKqF,SAAS,CAAC,+DAA+D,CAAAE,QAAA,eAC5ErF,IAAA,OAAImF,SAAS,CAAC,0CAA0C,CAAAE,QAAA,CAAC,uBAAqB,CAAI,CAAC,CAClFzE,OAAO,cACNd,KAAA,QAAKqF,SAAS,CAAC,uCAAuC,CAAAE,QAAA,eACpDrF,IAAA,QAAKmF,SAAS,CAAC,gEAAgE,CAAM,CAAC,cACtFnF,IAAA,SAAMmF,SAAS,CAAC,oBAAoB,CAAAE,QAAA,CAAC,kCAAgC,CAAM,CAAC,EACzE,CAAC,CACJxB,MAAM,CAACC,IAAI,CAACpD,gBAAgB,CAAC,CAACqD,MAAM,GAAK,CAAC,cAC5CjE,KAAA,QAAKqF,SAAS,CAAC,gCAAgC,CAAAE,QAAA,eAC7CrF,IAAA,QAAKmF,SAAS,CAAC,iCAAiC,CAACW,IAAI,CAAC,MAAM,CAACD,OAAO,CAAC,WAAW,CAACI,MAAM,CAAC,cAAc,CAAAZ,QAAA,cACpGrF,IAAA,SAAMkG,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACzB,CAAC,CAAC,2IAA2I,CAAE,CAAC,CAChN,CAAC,cACN3E,IAAA,MAAGmF,SAAS,CAAC,MAAM,CAAAE,QAAA,CAAC,oCAAkC,CAAG,CAAC,cAC1DrF,IAAA,MAAGmF,SAAS,CAAC,SAAS,CAAAE,QAAA,CAAC,+DAA6D,CAAG,CAAC,EACrF,CAAC,cAENrF,IAAA,QAAKmF,SAAS,CAAC,sDAAsD,CAAAE,QAAA,CAClExB,MAAM,CAACO,OAAO,CAAC1D,gBAAgB,CAAC,CAAC2D,GAAG,CAACgC,KAAA,EAAqB,IAApB,CAAC9B,MAAM,CAAEC,KAAK,CAAC,CAAA6B,KAAA,CACpD;AACA,KAAM,CAAA5B,IAAI,CAAGjE,WAAW,CAACkE,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACzC,aAAa,GAAK0C,QAAQ,CAACL,MAAM,CAAC,EAAII,CAAC,CAACjC,EAAE,GAAKkC,QAAQ,CAACL,MAAM,CAAC,CAAC,CACrG,KAAM,CAAA+B,aAAa,CAAGzC,MAAM,CAAC0C,MAAM,CAAC7F,gBAAgB,CAAC,CAAC8F,MAAM,CAAC,CAACC,GAAG,CAAEjC,KAAK,GAAKiC,GAAG,CAAGjC,KAAK,CAAE,CAAC,CAAC,CAC5F,KAAM,CAAAkC,UAAU,CAAGJ,aAAa,CAAG,CAAC,CAAG,CAAE9B,KAAK,CAAG8B,aAAa,CAAI,GAAG,EAAEK,OAAO,CAAC,CAAC,CAAC,CAAG,GAAG,CAEvF,mBACE7G,KAAA,QAAkBqF,SAAS,CAAC,qHAAqH,CAAAE,QAAA,eAC/IvF,KAAA,QAAKqF,SAAS,CAAC,wCAAwC,CAAAE,QAAA,eACrDrF,IAAA,OAAImF,SAAS,CAAC,qCAAqC,CAAAE,QAAA,CAChD,CAAAZ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEnB,IAAI,IAAImB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEI,eAAe,iBAAAC,MAAA,CAAkBP,MAAM,CAAE,CAC5D,CAAC,cACLzE,KAAA,SAAMqF,SAAS,CAAC,0DAA0D,CAAAE,QAAA,EACvEqB,UAAU,CAAC,GACd,EAAM,CAAC,EACJ,CAAC,cACN1G,IAAA,MAAGmF,SAAS,CAAC,yCAAyC,CAAAE,QAAA,CAAEb,KAAK,CAAI,CAAC,cAClExE,IAAA,MAAGmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAC,UAAQ,CAAG,CAAC,CAChD,CAAAZ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEmC,IAAI,gBACT9G,KAAA,MAAGqF,SAAS,CAAC,4BAA4B,CAAAE,QAAA,EAAC,QAAM,CAACZ,IAAI,CAACmC,IAAI,EAAI,CAC/D,GAbOrC,MAcL,CAAC,CAEV,CAAC,CAAC,CACC,CACN,CAGAV,MAAM,CAACC,IAAI,CAACpD,gBAAgB,CAAC,CAACqD,MAAM,CAAG,CAAC,eACvC/D,IAAA,QAAKmF,SAAS,CAAC,oCAAoC,CAAAE,QAAA,cACjDvF,KAAA,QAAKqF,SAAS,CAAC,mDAAmD,CAAAE,QAAA,eAChEvF,KAAA,QAAKqF,SAAS,CAAC,2BAA2B,CAAAE,QAAA,eACxCrF,IAAA,MAAGmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAC,mBAAiB,CAAG,CAAC,cAC1DrF,IAAA,MAAGmF,SAAS,CAAC,iCAAiC,CAAAE,QAAA,CAAExB,MAAM,CAACC,IAAI,CAACpD,gBAAgB,CAAC,CAACqD,MAAM,CAAI,CAAC,EACtF,CAAC,cACNjE,KAAA,QAAKqF,SAAS,CAAC,2BAA2B,CAAAE,QAAA,eACxCrF,IAAA,MAAGmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAC,gBAAc,CAAG,CAAC,cACvDrF,IAAA,MAAGmF,SAAS,CAAC,iCAAiC,CAAAE,QAAA,CAAExB,MAAM,CAAC0C,MAAM,CAAC7F,gBAAgB,CAAC,CAAC8F,MAAM,CAAC,CAACC,GAAG,CAAEjC,KAAK,GAAKiC,GAAG,CAAGjC,KAAK,CAAE,CAAC,CAAC,CAAI,CAAC,EACxH,CAAC,cACN1E,KAAA,QAAKqF,SAAS,CAAC,2BAA2B,CAAAE,QAAA,eACxCrF,IAAA,MAAGmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAC,oBAAkB,CAAG,CAAC,cAC3DrF,IAAA,MAAGmF,SAAS,CAAC,iCAAiC,CAAAE,QAAA,CAC3CxB,MAAM,CAACC,IAAI,CAACpD,gBAAgB,CAAC,CAACqD,MAAM,CAAG,CAAC,CACrC,CAACF,MAAM,CAAC0C,MAAM,CAAC7F,gBAAgB,CAAC,CAAC8F,MAAM,CAAC,CAACC,GAAG,CAAEjC,KAAK,GAAKiC,GAAG,CAAGjC,KAAK,CAAE,CAAC,CAAC,CAAGX,MAAM,CAACC,IAAI,CAACpD,gBAAgB,CAAC,CAACqD,MAAM,EAAE4C,OAAO,CAAC,CAAC,CAAC,CAC1H,GAAG,CAEN,CAAC,EACD,CAAC,EACH,CAAC,CACH,CACN,CAGA9C,MAAM,CAACC,IAAI,CAACpD,gBAAgB,CAAC,CAACqD,MAAM,CAAG,CAAC,eACvCjE,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAE,QAAA,eACnBrF,IAAA,OAAImF,SAAS,CAAC,0CAA0C,CAAAE,QAAA,CAAC,yBAAuB,CAAI,CAAC,cACrFrF,IAAA,QAAKmF,SAAS,CAAC,gDAAgD,CAAAE,QAAA,cAC7DrF,IAAA,QAAKmF,SAAS,CAAC,MAAM,CAAAE,QAAA,cACnBrF,IAAA,CAACJ,GAAG,EACFiC,IAAI,CAAE+B,mBAAoB,CAC1BiD,OAAO,CAAE,CACPC,UAAU,CAAE,IAAI,CAChBC,mBAAmB,CAAE,KAAK,CAC1BC,OAAO,CAAE,CACPC,MAAM,CAAE,CACNC,QAAQ,CAAE,QAAQ,CAClBlD,MAAM,CAAE,CACNmD,QAAQ,CAAE,EAAE,CACZC,IAAI,CAAE,CAAEC,IAAI,CAAE,EAAG,CACnB,CACF,CAAC,CACDC,OAAO,CAAE,CACPC,SAAS,CAAE,CACTvC,KAAK,CAAE,QAAAA,CAASwC,OAAO,CAAE,CACvB,KAAM,CAAAxC,KAAK,CAAGwC,OAAO,CAACxC,KAAK,EAAI,EAAE,CACjC,KAAM,CAAAQ,KAAK,CAAGgC,OAAO,CAACC,GAAa,CACnC,KAAM,CAAAC,KAAK,CAAG7D,MAAM,CAAC0C,MAAM,CAAC7F,gBAAgB,CAAC,CAAC8F,MAAM,CAAC,CAACC,GAAG,CAAEjC,KAAK,GAAKiC,GAAG,CAAGjC,KAAK,CAAE,CAAC,CAAC,CACpF,KAAM,CAAAkC,UAAU,CAAG,CAAElB,KAAK,CAAGkC,KAAK,CAAI,GAAG,EAAEf,OAAO,CAAC,CAAC,CAAC,CACrD,SAAA7B,MAAA,CAAUE,KAAK,OAAAF,MAAA,CAAKU,KAAK,gBAAAV,MAAA,CAAc4B,UAAU,OACnD,CACF,CACF,CACF,CACF,CAAE,CACH,CAAC,CACC,CAAC,CACH,CAAC,EACH,CACN,EACE,CAAC,cAGN5G,KAAA,QAAKqF,SAAS,CAAC,sEAAsE,CAAAE,QAAA,eACnFrF,IAAA,QAAKmF,SAAS,CAAC,iFAAiF,CAAAE,QAAA,cAC9FvF,KAAA,QAAKqF,SAAS,CAAC,mCAAmC,CAAAE,QAAA,eAChDvF,KAAA,OAAIqF,SAAS,CAAC,qCAAqC,CAAAE,QAAA,EAAC,YACxC,CAACnC,gBAAgB,CAACa,MAAM,CAAC,GACrC,EAAI,CAAC,cACLjE,KAAA,QAAKqF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,eAC1CrF,IAAA,QAAKmF,SAAS,CAAC,mCAAmC,CAAM,CAAC,cACzDnF,IAAA,SAAMmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAC,QAAM,CAAM,CAAC,EAClD,CAAC,EACH,CAAC,CACH,CAAC,CAELzE,OAAO,cACNd,KAAA,QAAKqF,SAAS,CAAC,uCAAuC,CAACC,IAAI,CAAC,QAAQ,CAAC,YAAU,QAAQ,CAAAC,QAAA,eACrFrF,IAAA,QAAKmF,SAAS,CAAC,6EAA6E,CAAM,CAAC,cACnGnF,IAAA,SAAMmF,SAAS,CAAC,SAAS,CAAAE,QAAA,CAAC,qBAAmB,CAAM,CAAC,EACjD,CAAC,cAENrF,IAAA,QAAKmF,SAAS,CAAC,iBAAiB,CAAAE,QAAA,cAC9BvF,KAAA,UAAOqF,SAAS,CAAC,qCAAqC,CAACC,IAAI,CAAC,OAAO,CAAAC,QAAA,eACjErF,IAAA,UAAOmF,SAAS,CAAC,YAAY,CAAAE,QAAA,cAC3BvF,KAAA,OAAAuF,QAAA,eACErF,IAAA,OAAI2H,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,gFAAgF,CAAAE,QAAA,CAAC,SAE3G,CAAI,CAAC,cACLrF,IAAA,OAAI2H,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,gFAAgF,CAAAE,QAAA,CAAC,YAE3G,CAAI,CAAC,cACLrF,IAAA,OAAI2H,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,gFAAgF,CAAAE,QAAA,CAAC,UAE3G,CAAI,CAAC,cACLrF,IAAA,OAAI2H,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,gFAAgF,CAAAE,QAAA,CAAC,OAE3G,CAAI,CAAC,cACLrF,IAAA,OAAI2H,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,gFAAgF,CAAAE,QAAA,CAAC,SAE3G,CAAI,CAAC,cACLrF,IAAA,OAAI2H,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,gFAAgF,CAAAE,QAAA,CAAC,aAE3G,CAAI,CAAC,cACLrF,IAAA,OAAI2H,KAAK,CAAC,KAAK,CAACxC,SAAS,CAAC,gFAAgF,CAAAE,QAAA,CAAC,SAE3G,CAAI,CAAC,EACH,CAAC,CACA,CAAC,cACRrF,IAAA,UAAOmF,SAAS,CAAC,mCAAmC,CAAAE,QAAA,CACjDnC,gBAAgB,CAACmB,GAAG,CAAC,CAACrC,OAAO,CAAE4F,KAAK,QAAAC,YAAA,CAAAC,qBAAA,oBACnChI,KAAA,OAA6BqF,SAAS,6FAAAL,MAAA,CAA8F8C,KAAK,CAAG,CAAC,GAAK,CAAC,CAAG,eAAe,CAAG,UAAU,CAAG,CAAAvC,QAAA,eACnLrF,IAAA,OAAImF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,cACzCvF,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAAAE,QAAA,eAChCrF,IAAA,QAAKmF,SAAS,CAAC,yBAAyB,CAAAE,QAAA,CACrCrD,OAAO,CAAC+F,KAAK,cACZ/H,IAAA,QACEmF,SAAS,CAAC,qCAAqC,CAC/C6C,GAAG,CAAEhG,OAAO,CAAC+F,KAAM,CACnBE,GAAG,IAAAnD,MAAA,CAAK9C,OAAO,CAACsB,IAAI,YAAW,CAChC,CAAC,cAEFtD,IAAA,QAAKmF,SAAS,CAAC,wGAAwG,CAAAE,QAAA,cACrHrF,IAAA,SAAMmF,SAAS,CAAC,gCAAgC,CAAC,cAAY,MAAM,CAAAE,QAAA,CAChErD,OAAO,CAACsB,IAAI,CAAC4E,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACjC,CAAC,CACJ,CACN,CACE,CAAC,cACNrI,KAAA,QAAKqF,SAAS,CAAC,MAAM,CAAAE,QAAA,eACnBrF,IAAA,QAAKmF,SAAS,CAAC,qCAAqC,CAAAE,QAAA,CAAErD,OAAO,CAACsB,IAAI,CAAM,CAAC,cACzExD,KAAA,QAAKqF,SAAS,CAAC,uEAAuE,CAAAE,QAAA,EAAC,MAAI,CAACrD,OAAO,CAACiB,UAAU,EAAM,CAAC,EAClH,CAAC,EACH,CAAC,CACJ,CAAC,cACLjD,IAAA,OAAImF,SAAS,CAAC,mDAAmD,CAAAE,QAAA,CAC9DrD,OAAO,CAACC,UAAU,cACjBnC,KAAA,QAAKqF,SAAS,CAAC,0DAA0D,CAAAE,QAAA,eACvErF,IAAA,QAAKmF,SAAS,CAAC,8BAA8B,CAAAE,QAAA,CAAErD,OAAO,CAACC,UAAU,CAACqB,IAAI,CAAM,CAAC,cAC7EtD,IAAA,QAAKmF,SAAS,CAAC,wBAAwB,CAAAE,QAAA,CAAErD,OAAO,CAACC,UAAU,CAAC2E,IAAI,CAAM,CAAC,EACpE,CAAC,cAEN5G,IAAA,SAAMmF,SAAS,CAAC,gDAAgD,CAAAE,QAAA,CAAC,cAAY,CAAM,CACpF,CACC,CAAC,cACLrF,IAAA,OAAImF,SAAS,CAAC,mDAAmD,CAAAE,QAAA,CAC9DrD,OAAO,CAAC0B,QAAQ,cACf5D,KAAA,QAAKqF,SAAS,CAAC,4DAA4D,CAAAE,QAAA,eACzErF,IAAA,QAAKmF,SAAS,CAAC,+BAA+B,CAAAE,QAAA,CAAErD,OAAO,CAAC0B,QAAQ,CAACJ,IAAI,CAAM,CAAC,cAC5EtD,IAAA,QAAKmF,SAAS,CAAC,yBAAyB,CAAAE,QAAA,CAAErD,OAAO,CAAC0B,QAAQ,CAACC,aAAa,CAAM,CAAC,EAC5E,CAAC,cAEN3D,IAAA,SAAMmF,SAAS,CAAC,gDAAgD,CAAAE,QAAA,CAAC,cAAY,CAAM,CACpF,CACC,CAAC,cACLrF,IAAA,OAAImF,SAAS,CAAC,mDAAmD,CAAAE,QAAA,CAC9DrD,OAAO,CAACoG,KAAK,cACZpI,IAAA,QAAKmF,SAAS,CAAC,wDAAwD,CAAAE,QAAA,cACrErF,IAAA,QAAKmF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,CAAErD,OAAO,CAACoG,KAAK,CAAM,CAAC,CAC/D,CAAC,cAENpI,IAAA,SAAMmF,SAAS,CAAC,gDAAgD,CAAAE,QAAA,CAAC,cAAY,CAAM,CACpF,CACC,CAAC,cACLvF,KAAA,OAAIqF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,eACzCrF,IAAA,QAAKmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAErD,OAAO,CAACyB,KAAK,CAAM,CAAC,cAC5DzD,IAAA,QAAKmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAErD,OAAO,CAACqG,KAAK,CAAM,CAAC,EAC1D,CAAC,cACLrI,IAAA,OAAImF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,cACzCvF,KAAA,QAAKqF,SAAS,CAAC,WAAW,CAAAE,QAAA,eACxBvF,KAAA,QAAKqF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,eAC1CrF,IAAA,QAAKmF,SAAS,CAAC,mCAAmC,CAAM,CAAC,cACzDnF,IAAA,SAAMmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAC,MAAI,CAAM,CAAC,cACnDrF,IAAA,SAAMmF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,CAAE,EAAAwC,YAAA,CAAA7F,OAAO,CAACsG,GAAG,UAAAT,YAAA,iBAAXA,YAAA,CAAalB,OAAO,CAAC,CAAC,CAAC,GAAI,KAAK,CAAO,CAAC,EACpF,CAAC,cACN7G,KAAA,QAAKqF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,eAC1CrF,IAAA,QAAKmF,SAAS,CAAC,kCAAkC,CAAM,CAAC,cACxDnF,IAAA,SAAMmF,SAAS,CAAC,uBAAuB,CAAAE,QAAA,CAAC,aAAW,CAAM,CAAC,cAC1DvF,KAAA,SAAMqF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,EAAE,EAAAyC,qBAAA,CAAA9F,OAAO,CAACuG,qBAAqB,UAAAT,qBAAA,iBAA7BA,qBAAA,CAA+BnB,OAAO,CAAC,CAAC,CAAC,GAAI,KAAK,CAAC,GAAC,EAAM,CAAC,EACvG,CAAC,EACH,CAAC,CACJ,CAAC,cACL3G,IAAA,OAAImF,SAAS,CAAC,iDAAiD,CAAAE,QAAA,cAC7DvF,KAAA,QAAKqF,SAAS,CAAC,6BAA6B,CAAAE,QAAA,eAC1CrF,IAAA,WACE4F,OAAO,CAAEA,CAAA,GAAM,CACbnE,iBAAiB,CAACO,OAAO,CAAC,CAC1BT,qBAAqB,CAAC,IAAI,CAAC,CAC7B,CAAE,CACF4D,SAAS,CAAC,kMAAkM,CAC5M,gCAAAL,MAAA,CAA+B9C,OAAO,CAACsB,IAAI,CAAG,CAC9CkF,KAAK,CAAC,cAAc,CAAAnD,QAAA,cAEpBvF,KAAA,QAAK2I,KAAK,CAAC,4BAA4B,CAACtD,SAAS,CAAC,SAAS,CAACW,IAAI,CAAC,MAAM,CAACD,OAAO,CAAC,WAAW,CAACI,MAAM,CAAC,cAAc,CAAAZ,QAAA,eAC/GrF,IAAA,SAAMkG,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACzB,CAAC,CAAC,kCAAkC,CAAE,CAAC,cAC1G3E,IAAA,SAAMkG,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACzB,CAAC,CAAC,yHAAyH,CAAE,CAAC,EAC9L,CAAC,CACA,CAAC,cACT3E,IAAA,WACE4F,OAAO,CAAEA,CAAA,GAAM,CACbzE,iBAAiB,CAACa,OAAO,CAAC,CAC1Bf,mBAAmB,CAAC,IAAI,CAAC,CAC3B,CAAE,CACFkE,SAAS,CAAC,8MAA8M,CACxN,6BAAAL,MAAA,CAA4B9C,OAAO,CAACsB,IAAI,CAAG,CAC3CkF,KAAK,CAAC,cAAc,CAAAnD,QAAA,cAEpBrF,IAAA,QAAKyI,KAAK,CAAC,4BAA4B,CAACtD,SAAS,CAAC,SAAS,CAACW,IAAI,CAAC,MAAM,CAACD,OAAO,CAAC,WAAW,CAACI,MAAM,CAAC,cAAc,CAAAZ,QAAA,cAC/GrF,IAAA,SAAMkG,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACzB,CAAC,CAAC,wHAAwH,CAAE,CAAC,CAC7L,CAAC,CACA,CAAC,cACT3E,IAAA,WACE4F,OAAO,CAAEA,CAAA,GAAMnD,mBAAmB,CAACT,OAAO,CAACiB,UAAU,CAAE,CACvDkC,SAAS,CAAC,4LAA4L,CACtM,+BAAAL,MAAA,CAA8B9C,OAAO,CAACsB,IAAI,CAAG,CAC7CkF,KAAK,CAAC,gBAAgB,CAAAnD,QAAA,cAEtBrF,IAAA,QAAKyI,KAAK,CAAC,4BAA4B,CAACtD,SAAS,CAAC,SAAS,CAACW,IAAI,CAAC,MAAM,CAACD,OAAO,CAAC,WAAW,CAACI,MAAM,CAAC,cAAc,CAAAZ,QAAA,cAC/GrF,IAAA,SAAMkG,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACzB,CAAC,CAAC,8HAA8H,CAAE,CAAC,CACnM,CAAC,CACA,CAAC,EACN,CAAC,CACJ,CAAC,GA/GE3C,OAAO,CAACiB,UAgHb,CAAC,EACN,CAAC,CACG,CAAC,EACH,CAAC,CACL,CACN,CAEAC,gBAAgB,CAACa,MAAM,GAAK,CAAC,EAAI,CAACnD,OAAO,eACxCd,KAAA,QAAKqF,SAAS,CAAC,mBAAmB,CAACC,IAAI,CAAC,QAAQ,CAAAC,QAAA,eAC9CrF,IAAA,QAAKmF,SAAS,CAAC,iCAAiC,CAACW,IAAI,CAAC,MAAM,CAACD,OAAO,CAAC,WAAW,CAACI,MAAM,CAAC,cAAc,CAAC,cAAY,MAAM,CAAAZ,QAAA,cACvHrF,IAAA,SAAMkG,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACC,WAAW,CAAE,CAAE,CAACzB,CAAC,CAAC,8GAA8G,CAAE,CAAC,CACnL,CAAC,cACN3E,IAAA,OAAImF,SAAS,CAAC,wCAAwC,CAAAE,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC7ErF,IAAA,MAAGmF,SAAS,CAAC,4BAA4B,CAAAE,QAAA,CACtCjE,UAAU,CAAG,kCAAkC,CAAG,sCAAsC,CACxF,CAAC,EACD,CACN,EACE,CAAC,CAGLJ,gBAAgB,eACfhB,IAAA,CAACN,YAAY,EACXgJ,MAAM,CAAE1H,gBAAiB,CACzB2H,SAAS,CAAEzH,cAAc,CAAGA,cAAc,CAAC+B,UAAU,CAAG2F,SAAU,CAClEC,OAAO,CAAEA,CAAA,GAAM,CACb5H,mBAAmB,CAAC,KAAK,CAAC,CAC1BE,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAE,CACF2H,SAAS,CAAEA,CAAA,GAAM,CACfpH,aAAa,CAAC,CAAC,CACjB,CAAE,CACH,CACF,CAGAJ,kBAAkB,EAAIE,cAAc,eACnCxB,IAAA,QAAKmF,SAAS,CAAC,gFAAgF,CAAAE,QAAA,cAC7FrF,IAAA,QAAKmF,SAAS,CAAC,mEAAmE,CAAAE,QAAA,cAChFrF,IAAA,CAACL,sBAAsB,EACrBgJ,SAAS,CAAEnH,cAAc,CAACyB,UAAW,CACrC4F,OAAO,CAAEA,CAAA,GAAM,CACbtH,qBAAqB,CAAC,KAAK,CAAC,CAC5BE,iBAAiB,CAAC,IAAI,CAAC,CACzB,CAAE,CACH,CAAC,CACC,CAAC,CACH,CACN,EACE,CAAC,CAEV,CAAC,CAED,2BAAevC,KAAK,CAAC6J,IAAI,CAAC9I,iBAAiB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}