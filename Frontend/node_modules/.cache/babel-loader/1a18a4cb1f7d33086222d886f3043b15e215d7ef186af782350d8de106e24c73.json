{"ast":null,"code":"import{Navigate,Outlet}from\"react-router-dom\";import{useAuth}from\"../context/AuthContext\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles=[]}=_ref;const{currentUser,loading}=useAuth();// Show loading state\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:\"Loading...\"});}// If not logged in → redirect to login\nif(!currentUser){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// If roles are specified and user's role is not allowed → redirect to dashboard\nif(allowedRoles.length>0&&!allowedRoles.includes(currentUser.role)){return/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true});}// Otherwise → render page\nreturn children?/*#__PURE__*/_jsx(_Fragment,{children:children}):/*#__PURE__*/_jsx(Outlet,{});};export default ProtectedRoute;","map":{"version":3,"names":["Navigate","Outlet","useAuth","jsx","_jsx","Fragment","_Fragment","ProtectedRoute","_ref","children","allowedRoles","currentUser","loading","className","to","replace","length","includes","role"],"sources":["c:/UMI/Frontend/src/routes/ProtectedRoute.tsx"],"sourcesContent":["import { Navigate, Outlet } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\n\r\ninterface ProtectedRouteProps {\r\n  allowedRoles?: string[];\r\n  children?: React.ReactNode;\r\n}\r\n\r\nconst ProtectedRoute = ({ children, allowedRoles = [] }: ProtectedRouteProps) => {\r\n  const { currentUser, loading } = useAuth();\r\n\r\n  // Show loading state\r\n  if (loading) {\r\n    return <div className=\"flex items-center justify-center h-screen\">Loading...</div>;\r\n  }\r\n\r\n  // If not logged in → redirect to login\r\n  if (!currentUser) {\r\n    return <Navigate to=\"/login\" replace />;\r\n  }\r\n\r\n  // If roles are specified and user's role is not allowed → redirect to dashboard\r\n  if (allowedRoles.length > 0 && !allowedRoles.includes(currentUser.role)) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  // Otherwise → render page\r\n  return children ? <>{children}</> : <Outlet />;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,MAAM,KAAQ,kBAAkB,CACnD,OAASC,OAAO,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAOjD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA0D,IAAzD,CAAEC,QAAQ,CAAEC,YAAY,CAAG,EAAwB,CAAC,CAAAF,IAAA,CAC1E,KAAM,CAAEG,WAAW,CAAEC,OAAQ,CAAC,CAAGV,OAAO,CAAC,CAAC,CAE1C;AACA,GAAIU,OAAO,CAAE,CACX,mBAAOR,IAAA,QAAKS,SAAS,CAAC,2CAA2C,CAAAJ,QAAA,CAAC,YAAU,CAAK,CAAC,CACpF,CAEA;AACA,GAAI,CAACE,WAAW,CAAE,CAChB,mBAAOP,IAAA,CAACJ,QAAQ,EAACc,EAAE,CAAC,QAAQ,CAACC,OAAO,MAAE,CAAC,CACzC,CAEA;AACA,GAAIL,YAAY,CAACM,MAAM,CAAG,CAAC,EAAI,CAACN,YAAY,CAACO,QAAQ,CAACN,WAAW,CAACO,IAAI,CAAC,CAAE,CACvE,mBAAOd,IAAA,CAACJ,QAAQ,EAACc,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAC,CAC7C,CAEA;AACA,MAAO,CAAAN,QAAQ,cAAGL,IAAA,CAAAE,SAAA,EAAAG,QAAA,CAAGA,QAAQ,CAAG,CAAC,cAAGL,IAAA,CAACH,MAAM,GAAE,CAAC,CAChD,CAAC,CAED,cAAe,CAAAM,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}