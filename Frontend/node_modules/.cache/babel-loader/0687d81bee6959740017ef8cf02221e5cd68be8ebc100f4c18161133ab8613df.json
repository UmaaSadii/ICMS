{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{departmentService,courseService,semesterService}from'../../api/apiService';import DepartmentModal from'../modals/DepartmentModal';import StudentModal from'../modals/StudentModal';import CourseModal from'../modals/CourseModal';import{useAuth}from'../../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DepartmentManagement=_ref=>{let{activeTab}=_ref;const{currentUser}=useAuth();const isAdmin=currentUser&&['admin','principal','director'].includes(currentUser.role);const[departments,setDepartments]=useState([]);const[courses,setCourses]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[showDepartmentModal,setShowDepartmentModal]=useState(false);const[editingDepartment,setEditingDepartment]=useState(null);const[showStudentModal,setShowStudentModal]=useState(false);const[preSelectedDepartment,setPreSelectedDepartment]=useState(undefined);const[preSelectedSemester,setPreSelectedSemester]=useState(undefined);const[expandedDepartments,setExpandedDepartments]=useState(new Set());const[showCourseModal,setShowCourseModal]=useState(false);const[selectedSemesterForCourse,setSelectedSemesterForCourse]=useState(null);const[editingCourse,setEditingCourse]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[selectedDepartments,setSelectedDepartments]=useState(new Set());const[showBulkActions,setShowBulkActions]=useState(false);const[generatingCourses,setGeneratingCourses]=useState(false);// Only admin can add or update departments\nconst canModifyDepartment=isAdmin;const fetchDepartments=useCallback(async()=>{setLoading(true);setError(null);try{const response=await departmentService.getAllDepartments();setDepartments(response.data);}catch(error){setError(error.message||'Failed to fetch departments');console.error('Error fetching departments:',error);}finally{setLoading(false);}},[]);const fetchCourses=useCallback(async()=>{try{const response=await courseService.getAllCourses();setCourses(response.data);}catch(error){console.error('Error fetching courses:',error);}},[]);useEffect(()=>{if(activeTab==='departments'){fetchDepartments();fetchCourses();}},[activeTab,fetchDepartments,fetchCourses]);const handleSubmit=async formData=>{try{if(editingDepartment){await departmentService.updateDepartment(editingDepartment.id,formData);}else{await departmentService.createDepartment(formData);}setShowDepartmentModal(false);setEditingDepartment(null);fetchDepartments();}catch(error){console.error('Error saving department:',error);throw error;}};const handleEditDepartment=department=>{setEditingDepartment(department);setShowDepartmentModal(true);};const handleDeleteDepartment=async departmentId=>{if(window.confirm('Are you sure you want to delete this department?')){try{await departmentService.deleteDepartment(departmentId);fetchDepartments();}catch(error){console.error('Error deleting department:',error);setError(error.message||'Failed to delete department');}}};const getCoursesForSemester=(semesterNumber,departmentId)=>{return courses.filter(course=>{var _course$semester_deta,_course$semester_deta2;return((_course$semester_deta=course.semester_details)===null||_course$semester_deta===void 0?void 0:_course$semester_deta.name)===\"Semester \".concat(semesterNumber)&&((_course$semester_deta2=course.semester_details)===null||_course$semester_deta2===void 0?void 0:_course$semester_deta2.department)===departmentId;});};const handleAddStudent=(departmentId,semesterNumber)=>{setPreSelectedDepartment(departmentId);setPreSelectedSemester(semesterNumber);setShowStudentModal(true);};const getDepartmentStats=departmentId=>{const departmentCourses=courses.filter(course=>{var _course$semester_deta3;return((_course$semester_deta3=course.semester_details)===null||_course$semester_deta3===void 0?void 0:_course$semester_deta3.department)===departmentId;});const totalCourses=departmentCourses.length;const totalCredits=departmentCourses.reduce((sum,course)=>sum+course.credits,0);const semesterCount=new Set(departmentCourses.map(course=>{var _course$semester_deta4;return(_course$semester_deta4=course.semester_details)===null||_course$semester_deta4===void 0?void 0:_course$semester_deta4.semester_id;})).size;return{totalCourses,totalCredits,semesterCount};};const toggleDepartmentExpansion=departmentId=>{setExpandedDepartments(prev=>{const newSet=new Set(prev);if(newSet.has(departmentId)){newSet.delete(departmentId);}else{newSet.add(departmentId);}return newSet;});};const handleAddCourse=(departmentId,semesterNumber)=>{setSelectedSemesterForCourse({departmentId,semesterNumber});setShowCourseModal(true);};const handleCourseSubmit=async courseData=>{try{if(editingCourse){await courseService.updateCourse(editingCourse.course_id,courseData);}else{await courseService.createCourse(courseData);}fetchCourses();// Refresh courses\nsetShowCourseModal(false);setSelectedSemesterForCourse(null);setEditingCourse(null);}catch(error){console.error('Error saving course:',error);throw error;}};const handleEditCourse=course=>{setEditingCourse(course);setShowCourseModal(true);};const handleDeleteCourse=async courseId=>{if(window.confirm('Are you sure you want to delete this course?')){try{console.log('Attempting to delete course with ID:',courseId);await courseService.deleteCourse(courseId);console.log('Course deleted successfully, refreshing courses...');await fetchCourses();console.log('Courses refreshed successfully');}catch(error){var _error$response;console.error('Error deleting course:',error);console.error('Error details:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);setError(error.message||'Failed to delete course');}}};const handleDeleteSemester=async(semesterId,semesterName)=>{if(window.confirm(\"Are you sure you want to delete \".concat(semesterName,\"? This will also delete all courses in this semester.\"))){try{await semesterService.deleteSemester(semesterId);fetchDepartments();// Refresh to get updated semester data\nfetchCourses();// Refresh courses as they might be affected\n}catch(error){console.error('Error deleting semester:',error);setError(error.message||'Failed to delete semester');}}};const generateDummyCourses=async(departmentId,semesterNumber)=>{setGeneratingCourses(true);try{// Get department info for course codes\nconst department=departments.find(d=>d.id===departmentId);if(!department)return;// Course templates based on department type\nconst courseTemplates={'CS':[{name:'Programming Fundamentals',code:'CS101',credits:3,description:'Introduction to programming concepts'},{name:'Data Structures',code:'CS201',credits:3,description:'Basic data structures and algorithms'},{name:'Database Systems',code:'CS301',credits:3,description:'Database design and management'},{name:'Software Engineering',code:'CS401',credits:3,description:'Software development methodologies'},{name:'Computer Networks',code:'CS501',credits:3,description:'Network protocols and architecture'}],'EE':[{name:'Circuit Analysis',code:'EE101',credits:3,description:'Basic electrical circuits'},{name:'Electronics',code:'EE201',credits:3,description:'Electronic devices and circuits'},{name:'Power Systems',code:'EE301',credits:3,description:'Electrical power generation and distribution'},{name:'Control Systems',code:'EE401',credits:3,description:'Automatic control systems'},{name:'Digital Signal Processing',code:'EE501',credits:3,description:'Signal processing techniques'}],'ME':[{name:'Engineering Drawing',code:'ME101',credits:2,description:'Technical drawing and CAD'},{name:'Thermodynamics',code:'ME201',credits:3,description:'Heat and energy systems'},{name:'Fluid Mechanics',code:'ME301',credits:3,description:'Fluid dynamics and applications'},{name:'Machine Design',code:'ME401',credits:3,description:'Mechanical design principles'},{name:'Manufacturing Processes',code:'ME501',credits:3,description:'Industrial manufacturing techniques'}],'CE':[{name:'Engineering Mechanics',code:'CE101',credits:3,description:'Statics and dynamics'},{name:'Structural Analysis',code:'CE201',credits:3,description:'Analysis of structures'},{name:'Concrete Technology',code:'CE301',credits:3,description:'Concrete materials and design'},{name:'Transportation Engineering',code:'CE401',credits:3,description:'Highway and traffic engineering'},{name:'Environmental Engineering',code:'CE501',credits:3,description:'Environmental systems'}],'BA':[{name:'Business Mathematics',code:'BA101',credits:3,description:'Mathematical concepts in business'},{name:'Financial Accounting',code:'BA201',credits:3,description:'Accounting principles'},{name:'Marketing Management',code:'BA301',credits:3,description:'Marketing strategies'},{name:'Human Resource Management',code:'BA401',credits:3,description:'HR practices and policies'},{name:'Business Ethics',code:'BA501',credits:3,description:'Ethical business practices'}]};// Get courses for this department type or use default\nconst templates=courseTemplates[department.code]||[{name:'Introduction to Subject',code:\"\".concat(department.code,\"101\"),credits:3,description:'Basic concepts'},{name:'Advanced Topics',code:\"\".concat(department.code,\"201\"),credits:3,description:'Advanced concepts'},{name:'Specialized Course',code:\"\".concat(department.code,\"301\"),credits:3,description:'Specialized topics'},{name:'Research Methods',code:\"\".concat(department.code,\"401\"),credits:3,description:'Research methodology'},{name:'Capstone Project',code:\"\".concat(department.code,\"501\"),credits:3,description:'Final project'}];// Create courses for this semester\nfor(const template of templates){const courseData={name:template.name,code:template.code,description:template.description,credits:template.credits,department:departmentId,semester:semesterNumber};await courseService.createCourse(courseData);}fetchCourses();// Refresh courses\n}catch(error){console.error('Error generating dummy courses:',error);setError(error.message||'Failed to generate dummy courses');}finally{setGeneratingCourses(false);}};const filteredDepartments=departments.filter(dept=>dept.name.toLowerCase().includes(searchTerm.toLowerCase())||dept.code.toLowerCase().includes(searchTerm.toLowerCase()));const handleSelectDepartment=departmentId=>{setSelectedDepartments(prev=>{const newSet=new Set(prev);if(newSet.has(departmentId)){newSet.delete(departmentId);}else{newSet.add(departmentId);}return newSet;});};const handleSelectAllDepartments=()=>{if(selectedDepartments.size===departments.length){setSelectedDepartments(new Set());}else{setSelectedDepartments(new Set(departments.map(d=>d.id)));}};const handleBulkGenerateCourses=async()=>{if(selectedDepartments.size===0)return;setGeneratingCourses(true);try{for(const departmentId of Array.from(selectedDepartments)){for(let semesterNumber=1;semesterNumber<=8;semesterNumber++){await generateDummyCourses(departmentId,semesterNumber);}}setSelectedDepartments(new Set());setShowBulkActions(false);}catch(error){console.error('Error in bulk course generation:',error);setError(error.message||'Failed to generate courses');}finally{setGeneratingCourses(false);}};if(activeTab!=='departments'){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-2\",children:\"Department Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-indigo-100\",children:\"Organize and manage academic departments, semesters, and courses\"})]}),canModifyDepartment&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowDepartmentModal(true),className:\"bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg transition-all flex items-center space-x-2 backdrop-blur-sm\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Department\"})]})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6 text-red-400 mr-3\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-800\",children:error})]})}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-500 mx-auto\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-gray-600\",children:\"Loading departments...\"})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-8\",children:departments.map(dept=>{const stats=getDepartmentStats(dept.id);const isExpanded=expandedDepartments.has(dept.id);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-white\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:dept.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-indigo-600 font-medium\",children:dept.code})]})]}),dept.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:dept.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-4 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-green-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Courses\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900\",children:stats.totalCourses})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-4 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-blue-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Semesters\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900\",children:stats.semesterCount})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-4 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-purple-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Total Credits\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xl font-bold text-gray-900\",children:stats.totalCredits})]})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 ml-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleDepartmentExpansion(dept.id),className:\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 transition-transform \".concat(isExpanded?'rotate-180':''),fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})}),/*#__PURE__*/_jsx(\"span\",{children:isExpanded?'Collapse':'Expand'})]}),canModifyDepartment&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditDepartment(dept),className:\"text-indigo-600 hover:text-indigo-900 p-2 rounded-lg hover:bg-indigo-50 transition-colors\",title:\"Edit Department\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteDepartment(dept.id),className:\"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors\",title:\"Delete Department\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})]})]})}),isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:[1,2,3,4,5,6,7,8].map(semesterNumber=>{const semesterCourses=getCoursesForSemester(semesterNumber,dept.id);const totalCredits=semesterCourses.reduce((sum,course)=>sum+course.credits,0);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white text-sm font-bold\",children:semesterNumber})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"font-semibold text-gray-900\",children:[\"Semester \",semesterNumber]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[semesterCourses.length,\" courses \\u2022 \",totalCredits,\" credits\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleAddCourse(dept.id,semesterNumber),className:\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 text-sm\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Course\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleAddStudent(dept.id,semesterNumber),className:\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 text-sm\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Student\"})]}),canModifyDepartment&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteSemester(semesterNumber,\"Semester \".concat(semesterNumber)),className:\"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors\",title:\"Delete Semester\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})]}),semesterCourses.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:semesterCourses.map(course=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-6 h-6 bg-blue-100 rounded flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-3 h-3 text-blue-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-900\",children:course.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:course.code})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\",children:[course.credits,\" credits\"]}),canModifyDepartment&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteCourse(course.course_id),className:\"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors\",title:\"Delete Course\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})]})]},course.course_id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-6\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-8 w-8 text-gray-400 mb-2\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm\",children:\"No courses added yet\"})]})]},semesterNumber);})})]},dept.id);})}),showDepartmentModal&&/*#__PURE__*/_jsx(DepartmentModal,{isOpen:showDepartmentModal,onClose:()=>{setShowDepartmentModal(false);setEditingDepartment(null);},onSubmit:handleSubmit,editingDepartment:editingDepartment}),showStudentModal&&/*#__PURE__*/_jsx(StudentModal,{isOpen:showStudentModal,onClose:()=>setShowStudentModal(false),onSuccess:()=>{setShowStudentModal(false);setPreSelectedDepartment(undefined);setPreSelectedSemester(undefined);},preSelectedDepartment:preSelectedDepartment,preSelectedSemester:preSelectedSemester}),showCourseModal&&selectedSemesterForCourse&&/*#__PURE__*/_jsx(CourseModal,{isOpen:showCourseModal,onClose:()=>{setShowCourseModal(false);setSelectedSemesterForCourse(null);},onSubmit:handleCourseSubmit,preSelectedDepartment:selectedSemesterForCourse===null||selectedSemesterForCourse===void 0?void 0:selectedSemesterForCourse.departmentId,preSelectedSemester:selectedSemesterForCourse===null||selectedSemesterForCourse===void 0?void 0:selectedSemesterForCourse.semesterNumber})]});};export default/*#__PURE__*/React.memo(DepartmentManagement);","map":{"version":3,"names":["React","useState","useEffect","useCallback","departmentService","courseService","semesterService","DepartmentModal","StudentModal","CourseModal","useAuth","jsx","_jsx","jsxs","_jsxs","DepartmentManagement","_ref","activeTab","currentUser","isAdmin","includes","role","departments","setDepartments","courses","setCourses","loading","setLoading","error","setError","showDepartmentModal","setShowDepartmentModal","editingDepartment","setEditingDepartment","showStudentModal","setShowStudentModal","preSelectedDepartment","setPreSelectedDepartment","undefined","preSelectedSemester","setPreSelectedSemester","expandedDepartments","setExpandedDepartments","Set","showCourseModal","setShowCourseModal","selectedSemesterForCourse","setSelectedSemesterForCourse","editingCourse","setEditingCourse","searchTerm","setSearchTerm","selectedDepartments","setSelectedDepartments","showBulkActions","setShowBulkActions","generatingCourses","setGeneratingCourses","canModifyDepartment","fetchDepartments","response","getAllDepartments","data","message","console","fetchCourses","getAllCourses","handleSubmit","formData","updateDepartment","id","createDepartment","handleEditDepartment","department","handleDeleteDepartment","departmentId","window","confirm","deleteDepartment","getCoursesForSemester","semesterNumber","filter","course","_course$semester_deta","_course$semester_deta2","semester_details","name","concat","handleAddStudent","getDepartmentStats","departmentCourses","_course$semester_deta3","totalCourses","length","totalCredits","reduce","sum","credits","semesterCount","map","_course$semester_deta4","semester_id","size","toggleDepartmentExpansion","prev","newSet","has","delete","add","handleAddCourse","handleCourseSubmit","courseData","updateCourse","course_id","createCourse","handleEditCourse","handleDeleteCourse","courseId","log","deleteCourse","_error$response","handleDeleteSemester","semesterId","semesterName","deleteSemester","generateDummyCourses","find","d","courseTemplates","code","description","templates","template","semester","filteredDepartments","dept","toLowerCase","handleSelectDepartment","handleSelectAllDepartments","handleBulkGenerateCourses","Array","from","className","children","onClick","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","stats","isExpanded","title","semesterCourses","isOpen","onClose","onSubmit","onSuccess","memo"],"sources":["c:/UMI/Frontend/src/components/pages/DepartmentManagement.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { departmentService, courseService, semesterService } from '../../api/apiService';\r\nimport DepartmentModal from '../modals/DepartmentModal';\r\nimport StudentModal from '../modals/StudentModal';\r\nimport CourseModal from '../modals/CourseModal';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\ninterface Department {\r\n  id: number;\r\n  name: string;\r\n  code: string;\r\n  description: string;\r\n}\r\n\r\ninterface Course {\r\n  course_id: number;\r\n  name: string;\r\n  code: string;\r\n  description: string;\r\n  credits: number;\r\n  semester_details?: {\r\n    semester_id: number;\r\n    name: string;\r\n    semester_code: string;\r\n    program: string;\r\n    capacity: number;\r\n    department: number; // This is just the department ID, not a nested object\r\n  };\r\n}\r\n\r\ninterface DepartmentManagementProps {\r\n  activeTab: string;\r\n}\r\n\r\nconst DepartmentManagement: React.FC<DepartmentManagementProps> = ({ activeTab }) => {\r\n  const { currentUser } = useAuth();\r\n  const isAdmin = currentUser && ['admin', 'principal', 'director'].includes(currentUser.role);\r\n\r\n  const [departments, setDepartments] = useState<Department[]>([]);\r\n  const [courses, setCourses] = useState<Course[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showDepartmentModal, setShowDepartmentModal] = useState<boolean>(false);\r\n  const [editingDepartment, setEditingDepartment] = useState<Department | null>(null);\r\n  const [showStudentModal, setShowStudentModal] = useState<boolean>(false);\r\n  const [preSelectedDepartment, setPreSelectedDepartment] = useState<number | undefined>(undefined);\r\n  const [preSelectedSemester, setPreSelectedSemester] = useState<number | undefined>(undefined);\r\n  const [expandedDepartments, setExpandedDepartments] = useState<Set<number>>(new Set());\r\n  const [showCourseModal, setShowCourseModal] = useState<boolean>(false);\r\n  const [selectedSemesterForCourse, setSelectedSemesterForCourse] = useState<{departmentId: number, semesterNumber: number} | null>(null);\r\n  const [editingCourse, setEditingCourse] = useState<Course | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState<string>('');\r\n  const [selectedDepartments, setSelectedDepartments] = useState<Set<number>>(new Set());\r\n  const [showBulkActions, setShowBulkActions] = useState<boolean>(false);\r\n  const [generatingCourses, setGeneratingCourses] = useState<boolean>(false);\r\n\r\n  // Only admin can add or update departments\r\n  const canModifyDepartment = isAdmin;\r\n\r\n  const fetchDepartments = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const response = await departmentService.getAllDepartments();\r\n      setDepartments(response.data);\r\n    } catch (error: any) {\r\n      setError(error.message || 'Failed to fetch departments');\r\n      console.error('Error fetching departments:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const fetchCourses = useCallback(async () => {\r\n    try {\r\n      const response = await courseService.getAllCourses();\r\n      setCourses(response.data);\r\n    } catch (error: any) {\r\n      console.error('Error fetching courses:', error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (activeTab === 'departments') {\r\n      fetchDepartments();\r\n      fetchCourses();\r\n    }\r\n  }, [activeTab, fetchDepartments, fetchCourses]);\r\n\r\n  const handleSubmit = async (formData: any) => {\r\n    try {\r\n      if (editingDepartment) {\r\n        await departmentService.updateDepartment(editingDepartment.id, formData);\r\n      } else {\r\n        await departmentService.createDepartment(formData);\r\n      }\r\n      setShowDepartmentModal(false);\r\n      setEditingDepartment(null);\r\n      fetchDepartments();\r\n    } catch (error: any) {\r\n      console.error('Error saving department:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleEditDepartment = (department: Department) => {\r\n    setEditingDepartment(department);\r\n    setShowDepartmentModal(true);\r\n  };\r\n\r\n  const handleDeleteDepartment = async (departmentId: number) => {\r\n    if (window.confirm('Are you sure you want to delete this department?')) {\r\n      try {\r\n        await departmentService.deleteDepartment(departmentId);\r\n        fetchDepartments();\r\n      } catch (error: any) {\r\n        console.error('Error deleting department:', error);\r\n        setError(error.message || 'Failed to delete department');\r\n      }\r\n    }\r\n  };\r\n\r\n  const getCoursesForSemester = (semesterNumber: number, departmentId: number) => {\r\n    return courses.filter(course =>\r\n      course.semester_details?.name === `Semester ${semesterNumber}` &&\r\n      course.semester_details?.department === departmentId\r\n    );\r\n  };\r\n\r\n  const handleAddStudent = (departmentId: number, semesterNumber: number) => {\r\n    setPreSelectedDepartment(departmentId);\r\n    setPreSelectedSemester(semesterNumber);\r\n    setShowStudentModal(true);\r\n  };\r\n\r\n  const getDepartmentStats = (departmentId: number) => {\r\n    const departmentCourses = courses.filter(course =>\r\n      course.semester_details?.department === departmentId\r\n    );\r\n\r\n    const totalCourses = departmentCourses.length;\r\n    const totalCredits = departmentCourses.reduce((sum, course) => sum + course.credits, 0);\r\n    const semesterCount = new Set(departmentCourses.map(course => course.semester_details?.semester_id)).size;\r\n\r\n    return {\r\n      totalCourses,\r\n      totalCredits,\r\n      semesterCount\r\n    };\r\n  };\r\n\r\n  const toggleDepartmentExpansion = (departmentId: number) => {\r\n    setExpandedDepartments(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(departmentId)) {\r\n        newSet.delete(departmentId);\r\n      } else {\r\n        newSet.add(departmentId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const handleAddCourse = (departmentId: number, semesterNumber: number) => {\r\n    setSelectedSemesterForCourse({ departmentId, semesterNumber });\r\n    setShowCourseModal(true);\r\n  };\r\n\r\n  const handleCourseSubmit = async (courseData: any) => {\r\n    try {\r\n      if (editingCourse) {\r\n        await courseService.updateCourse(editingCourse.course_id, courseData);\r\n      } else {\r\n        await courseService.createCourse(courseData);\r\n      }\r\n      fetchCourses(); // Refresh courses\r\n      setShowCourseModal(false);\r\n      setSelectedSemesterForCourse(null);\r\n      setEditingCourse(null);\r\n    } catch (error: any) {\r\n      console.error('Error saving course:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleEditCourse = (course: Course) => {\r\n    setEditingCourse(course);\r\n    setShowCourseModal(true);\r\n  };\r\n\r\n  const handleDeleteCourse = async (courseId: number) => {\r\n    if (window.confirm('Are you sure you want to delete this course?')) {\r\n      try {\r\n        console.log('Attempting to delete course with ID:', courseId);\r\n        await courseService.deleteCourse(courseId);\r\n        console.log('Course deleted successfully, refreshing courses...');\r\n        await fetchCourses();\r\n        console.log('Courses refreshed successfully');\r\n      } catch (error: any) {\r\n        console.error('Error deleting course:', error);\r\n        console.error('Error details:', error.response?.data || error.message);\r\n        setError(error.message || 'Failed to delete course');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDeleteSemester = async (semesterId: number, semesterName: string) => {\r\n    if (window.confirm(`Are you sure you want to delete ${semesterName}? This will also delete all courses in this semester.`)) {\r\n      try {\r\n        await semesterService.deleteSemester(semesterId);\r\n        fetchDepartments(); // Refresh to get updated semester data\r\n        fetchCourses(); // Refresh courses as they might be affected\r\n      } catch (error: any) {\r\n        console.error('Error deleting semester:', error);\r\n        setError(error.message || 'Failed to delete semester');\r\n      }\r\n    }\r\n  };\r\n\r\n  const generateDummyCourses = async (departmentId: number, semesterNumber: number) => {\r\n    setGeneratingCourses(true);\r\n    try {\r\n      // Get department info for course codes\r\n      const department = departments.find(d => d.id === departmentId);\r\n      if (!department) return;\r\n\r\n      // Course templates based on department type\r\n      const courseTemplates = {\r\n        'CS': [\r\n          { name: 'Programming Fundamentals', code: 'CS101', credits: 3, description: 'Introduction to programming concepts' },\r\n          { name: 'Data Structures', code: 'CS201', credits: 3, description: 'Basic data structures and algorithms' },\r\n          { name: 'Database Systems', code: 'CS301', credits: 3, description: 'Database design and management' },\r\n          { name: 'Software Engineering', code: 'CS401', credits: 3, description: 'Software development methodologies' },\r\n          { name: 'Computer Networks', code: 'CS501', credits: 3, description: 'Network protocols and architecture' }\r\n        ],\r\n        'EE': [\r\n          { name: 'Circuit Analysis', code: 'EE101', credits: 3, description: 'Basic electrical circuits' },\r\n          { name: 'Electronics', code: 'EE201', credits: 3, description: 'Electronic devices and circuits' },\r\n          { name: 'Power Systems', code: 'EE301', credits: 3, description: 'Electrical power generation and distribution' },\r\n          { name: 'Control Systems', code: 'EE401', credits: 3, description: 'Automatic control systems' },\r\n          { name: 'Digital Signal Processing', code: 'EE501', credits: 3, description: 'Signal processing techniques' }\r\n        ],\r\n        'ME': [\r\n          { name: 'Engineering Drawing', code: 'ME101', credits: 2, description: 'Technical drawing and CAD' },\r\n          { name: 'Thermodynamics', code: 'ME201', credits: 3, description: 'Heat and energy systems' },\r\n          { name: 'Fluid Mechanics', code: 'ME301', credits: 3, description: 'Fluid dynamics and applications' },\r\n          { name: 'Machine Design', code: 'ME401', credits: 3, description: 'Mechanical design principles' },\r\n          { name: 'Manufacturing Processes', code: 'ME501', credits: 3, description: 'Industrial manufacturing techniques' }\r\n        ],\r\n        'CE': [\r\n          { name: 'Engineering Mechanics', code: 'CE101', credits: 3, description: 'Statics and dynamics' },\r\n          { name: 'Structural Analysis', code: 'CE201', credits: 3, description: 'Analysis of structures' },\r\n          { name: 'Concrete Technology', code: 'CE301', credits: 3, description: 'Concrete materials and design' },\r\n          { name: 'Transportation Engineering', code: 'CE401', credits: 3, description: 'Highway and traffic engineering' },\r\n          { name: 'Environmental Engineering', code: 'CE501', credits: 3, description: 'Environmental systems' }\r\n        ],\r\n        'BA': [\r\n          { name: 'Business Mathematics', code: 'BA101', credits: 3, description: 'Mathematical concepts in business' },\r\n          { name: 'Financial Accounting', code: 'BA201', credits: 3, description: 'Accounting principles' },\r\n          { name: 'Marketing Management', code: 'BA301', credits: 3, description: 'Marketing strategies' },\r\n          { name: 'Human Resource Management', code: 'BA401', credits: 3, description: 'HR practices and policies' },\r\n          { name: 'Business Ethics', code: 'BA501', credits: 3, description: 'Ethical business practices' }\r\n        ]\r\n      };\r\n\r\n      // Get courses for this department type or use default\r\n      const templates = courseTemplates[department.code as keyof typeof courseTemplates] || [\r\n        { name: 'Introduction to Subject', code: `${department.code}101`, credits: 3, description: 'Basic concepts' },\r\n        { name: 'Advanced Topics', code: `${department.code}201`, credits: 3, description: 'Advanced concepts' },\r\n        { name: 'Specialized Course', code: `${department.code}301`, credits: 3, description: 'Specialized topics' },\r\n        { name: 'Research Methods', code: `${department.code}401`, credits: 3, description: 'Research methodology' },\r\n        { name: 'Capstone Project', code: `${department.code}501`, credits: 3, description: 'Final project' }\r\n      ];\r\n\r\n      // Create courses for this semester\r\n      for (const template of templates) {\r\n        const courseData = {\r\n          name: template.name,\r\n          code: template.code,\r\n          description: template.description,\r\n          credits: template.credits,\r\n          department: departmentId,\r\n          semester: semesterNumber\r\n        };\r\n\r\n        await courseService.createCourse(courseData);\r\n      }\r\n\r\n      fetchCourses(); // Refresh courses\r\n    } catch (error: any) {\r\n      console.error('Error generating dummy courses:', error);\r\n      setError(error.message || 'Failed to generate dummy courses');\r\n    } finally {\r\n      setGeneratingCourses(false);\r\n    }\r\n  };\r\n\r\n  const filteredDepartments = departments.filter(dept =>\r\n    dept.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    dept.code.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const handleSelectDepartment = (departmentId: number) => {\r\n    setSelectedDepartments(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(departmentId)) {\r\n        newSet.delete(departmentId);\r\n      } else {\r\n        newSet.add(departmentId);\r\n      }\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const handleSelectAllDepartments = () => {\r\n    if (selectedDepartments.size === departments.length) {\r\n      setSelectedDepartments(new Set());\r\n    } else {\r\n      setSelectedDepartments(new Set(departments.map(d => d.id)));\r\n    }\r\n  };\r\n\r\n  const handleBulkGenerateCourses = async () => {\r\n    if (selectedDepartments.size === 0) return;\r\n\r\n    setGeneratingCourses(true);\r\n    try {\r\n      for (const departmentId of Array.from(selectedDepartments)) {\r\n        for (let semesterNumber = 1; semesterNumber <= 8; semesterNumber++) {\r\n          await generateDummyCourses(departmentId, semesterNumber);\r\n        }\r\n      }\r\n      setSelectedDepartments(new Set());\r\n      setShowBulkActions(false);\r\n    } catch (error: any) {\r\n      console.error('Error in bulk course generation:', error);\r\n      setError(error.message || 'Failed to generate courses');\r\n    } finally {\r\n      setGeneratingCourses(false);\r\n    }\r\n  };\r\n\r\n  if (activeTab !== 'departments') {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Header Section */}\r\n      <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 text-white\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <div>\r\n            <h2 className=\"text-3xl font-bold mb-2\">Department Management</h2>\r\n            <p className=\"text-indigo-100\">Organize and manage academic departments, semesters, and courses</p>\r\n          </div>\r\n          {canModifyDepartment && (\r\n            <button\r\n              onClick={() => setShowDepartmentModal(true)}\r\n              className=\"bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg transition-all flex items-center space-x-2 backdrop-blur-sm\"\r\n            >\r\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n              </svg>\r\n              <span>Add Department</span>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center\">\r\n            <svg className=\"h-6 w-6 text-red-400 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n            <p className=\"text-red-800\">{error}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {loading ? (\r\n        <div className=\"flex justify-center items-center py-16\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-500 mx-auto\"></div>\r\n            <p className=\"mt-4 text-gray-600\">Loading departments...</p>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid gap-8\">\r\n          {departments.map((dept) => {\r\n            const stats = getDepartmentStats(dept.id);\r\n            const isExpanded = expandedDepartments.has(dept.id);\r\n\r\n            return (\r\n              <div key={dept.id} className=\"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100\">\r\n                {/* Department Header */}\r\n                <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 border-b border-gray-200\">\r\n                  <div className=\"flex justify-between items-start\">\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"flex items-center space-x-4 mb-3\">\r\n                        <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center\">\r\n                          <svg className=\"w-6 h-6 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\r\n                          </svg>\r\n                        </div>\r\n                        <div>\r\n                          <h3 className=\"text-2xl font-bold text-gray-900\">{dept.name}</h3>\r\n                          <p className=\"text-indigo-600 font-medium\">{dept.code}</p>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {dept.description && (\r\n                        <p className=\"text-gray-600 mb-4\">{dept.description}</p>\r\n                      )}\r\n\r\n                      {/* Department Statistics */}\r\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm\">\r\n                          <div className=\"flex items-center\">\r\n                            <div className=\"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mr-3\">\r\n                              <svg className=\"w-4 h-4 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                              </svg>\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm text-gray-500\">Total Courses</p>\r\n                              <p className=\"text-xl font-bold text-gray-900\">{stats.totalCourses}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm\">\r\n                          <div className=\"flex items-center\">\r\n                            <div className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3\">\r\n                              <svg className=\"w-4 h-4 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\r\n                              </svg>\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm text-gray-500\">Semesters</p>\r\n                              <p className=\"text-xl font-bold text-gray-900\">{stats.semesterCount}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"bg-white rounded-lg p-4 shadow-sm\">\r\n                          <div className=\"flex items-center\">\r\n                            <div className=\"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3\">\r\n                              <svg className=\"w-4 h-4 text-purple-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                              </svg>\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm text-gray-500\">Total Credits</p>\r\n                              <p className=\"text-xl font-bold text-gray-900\">{stats.totalCredits}</p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center space-x-3 ml-6\">\r\n                      <button\r\n                        onClick={() => toggleDepartmentExpansion(dept.id)}\r\n                        className=\"bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors flex items-center space-x-2\"\r\n                      >\r\n                        <svg className={`w-4 h-4 transition-transform ${isExpanded ? 'rotate-180' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\r\n                        </svg>\r\n                        <span>{isExpanded ? 'Collapse' : 'Expand'}</span>\r\n                      </button>\r\n\r\n                      {canModifyDepartment && (\r\n                        <div className=\"flex space-x-2\">\r\n                          <button\r\n                            onClick={() => handleEditDepartment(dept)}\r\n                            className=\"text-indigo-600 hover:text-indigo-900 p-2 rounded-lg hover:bg-indigo-50 transition-colors\"\r\n                            title=\"Edit Department\"\r\n                          >\r\n                            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\r\n                            </svg>\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDeleteDepartment(dept.id)}\r\n                            className=\"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors\"\r\n                            title=\"Delete Department\"\r\n                          >\r\n                            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                            </svg>\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Display semesters 1-8 with courses */}\r\n                {isExpanded && (\r\n                  <div className=\"space-y-4\">\r\n                    {[1, 2, 3, 4, 5, 6, 7, 8].map((semesterNumber) => {\r\n                      const semesterCourses = getCoursesForSemester(semesterNumber, dept.id);\r\n                      const totalCredits = semesterCourses.reduce((sum, course) => sum + course.credits, 0);\r\n\r\n                      return (\r\n                        <div key={semesterNumber} className=\"bg-white rounded-lg border border-gray-200 p-4\">\r\n                          <div className=\"flex justify-between items-center mb-3\">\r\n                            <div className=\"flex items-center space-x-3\">\r\n                              <div className=\"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center\">\r\n                                <span className=\"text-white text-sm font-bold\">{semesterNumber}</span>\r\n                              </div>\r\n                              <div>\r\n                                <h5 className=\"font-semibold text-gray-900\">Semester {semesterNumber}</h5>\r\n                                <p className=\"text-sm text-gray-500\">{semesterCourses.length} courses  {totalCredits} credits</p>\r\n                              </div>\r\n                            </div>\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <button\r\n                                onClick={() => handleAddCourse(dept.id, semesterNumber)}\r\n                                className=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 text-sm\"\r\n                              >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n                                </svg>\r\n                                <span>Add Course</span>\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleAddStudent(dept.id, semesterNumber)}\r\n                                className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 text-sm\"\r\n                              >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n                                </svg>\r\n                                <span>Add Student</span>\r\n                              </button>\r\n                              {canModifyDepartment && (\r\n                                <button\r\n                                  onClick={() => handleDeleteSemester(semesterNumber, `Semester ${semesterNumber}`)}\r\n                                  className=\"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors\"\r\n                                  title=\"Delete Semester\"\r\n                                >\r\n                                  <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                  </svg>\r\n                                </button>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          {semesterCourses.length > 0 ? (\r\n                            <div className=\"space-y-2\">\r\n                              {semesterCourses.map((course) => (\r\n                                <div key={course.course_id} className=\"flex justify-between items-center bg-gray-50 rounded-lg p-3\">\r\n                                  <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center space-x-3\">\r\n                                      <div className=\"w-6 h-6 bg-blue-100 rounded flex items-center justify-center\">\r\n                                        <svg className=\"w-3 h-3 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\r\n                                        </svg>\r\n                                      </div>\r\n                                      <div>\r\n                                        <p className=\"font-medium text-gray-900\">{course.name}</p>\r\n                                        <p className=\"text-sm text-gray-500\">{course.code}</p>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div className=\"flex items-center space-x-3\">\r\n                                    <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n                                      {course.credits} credits\r\n                                    </span>\r\n                                    {canModifyDepartment && (\r\n                                      <button\r\n                                        onClick={() => handleDeleteCourse(course.course_id)}\r\n                                        className=\"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50 transition-colors\"\r\n                                        title=\"Delete Course\"\r\n                                      >\r\n                                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                        </svg>\r\n                                      </button>\r\n                                    )}\r\n                                  </div>\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          ) : (\r\n                            <div className=\"text-center py-6\">\r\n                              <svg className=\"mx-auto h-8 w-8 text-gray-400 mb-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253\" />\r\n                              </svg>\r\n                              <p className=\"text-gray-500 text-sm\">No courses added yet</p>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Modals */}\r\n      {showDepartmentModal && (\r\n        <DepartmentModal\r\n          isOpen={showDepartmentModal}\r\n          onClose={() => {\r\n            setShowDepartmentModal(false);\r\n            setEditingDepartment(null);\r\n          }}\r\n          onSubmit={handleSubmit}\r\n          editingDepartment={editingDepartment}\r\n        />\r\n      )}\r\n\r\n      {showStudentModal && (\r\n        <StudentModal\r\n          isOpen={showStudentModal}\r\n          onClose={() => setShowStudentModal(false)}\r\n          onSuccess={() => {\r\n            setShowStudentModal(false);\r\n            setPreSelectedDepartment(undefined);\r\n            setPreSelectedSemester(undefined);\r\n          }}\r\n          preSelectedDepartment={preSelectedDepartment}\r\n          preSelectedSemester={preSelectedSemester}\r\n        />\r\n      )}\r\n\r\n      {showCourseModal && selectedSemesterForCourse && (\r\n        <CourseModal\r\n          isOpen={showCourseModal}\r\n          onClose={() => {\r\n            setShowCourseModal(false);\r\n            setSelectedSemesterForCourse(null);\r\n          }}\r\n          onSubmit={handleCourseSubmit}\r\n          preSelectedDepartment={selectedSemesterForCourse?.departmentId}\r\n          preSelectedSemester={selectedSemesterForCourse?.semesterNumber}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(DepartmentManagement);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}