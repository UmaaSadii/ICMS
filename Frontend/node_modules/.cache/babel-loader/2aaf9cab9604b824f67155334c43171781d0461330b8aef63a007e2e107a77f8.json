{"ast":null,"code":"import _objectSpread from\"c:/UMI/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{studentService,departmentService,courseService}from'../../api/apiService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentModal=_ref=>{let{isOpen,onClose,studentId,onSuccess,preSelectedDepartment}=_ref;const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const[departments,setDepartments]=useState([]);const[semesters,setSemesters]=useState([]);const[courses,setCourses]=useState([]);const[imageFile,setImageFile]=useState(null);const[imagePreview,setImagePreview]=useState(undefined);const[formData,setFormData]=useState({first_name:'',last_name:'',email:'',password:'',registration_number:'',department:0,// Department field\nsemester:0,// Semester field\nbatch:'',// Batch field\nguardian_name:'',guardian_contact:'',address:'',date_of_birth:'',gender:'male',blood_group:'',phone:''});// Fetch departments\nuseEffect(()=>{const fetchDepartments=async()=>{try{setError(null);// Clear any previous errors\nconsole.log('Fetching departments...');// Debug log\nconst response=await departmentService.getAllDepartments();console.log('Departments response:',response);// Debug log\nconsole.log('Departments data:',response.data);// Debug log\nif(response&&response.data){let departmentsData=[];if(Array.isArray(response.data)){departmentsData=response.data;}else if(response.data.results&&Array.isArray(response.data.results)){// Handle paginated response\ndepartmentsData=response.data.results;}else{// Try to extract departments from any structure\ndepartmentsData=response.data.departments||[];}// Validate department data structure\nconst validDepartments=departmentsData.filter(dept=>dept&&typeof dept==='object'&&dept.id&&dept.name);if(validDepartments.length>0){setDepartments(validDepartments);console.log('Departments loaded successfully:',validDepartments.length,'departments');// Set pre-selected department if provided\nif(preSelectedDepartment){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{department:preSelectedDepartment}));}}else{setError('No valid departments found');console.error('No valid departments in response:',response.data);}}else{setError('Failed to load departments: No response data');console.error('No response data received');}}catch(error){var _error$response,_error$response2,_error$response3,_error$response4;console.error('Error fetching departments:',error);console.error('Error response:',error.response);console.error('Error status:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status);console.error('Error data:',(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data);if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===401){setError('Authentication required. Please login first.');}else if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)===403){setError('Access denied. You do not have permission to view departments.');}else{setError('Failed to load departments. Please check your connection and try again.');}}};if(isOpen){fetchDepartments();}},[preSelectedDepartment,isOpen]);// Fetch semesters when department changes\nuseEffect(()=>{const fetchSemesters=async()=>{if(!formData.department){setSemesters([]);return;}try{setError(null);// Clear any previous errors\nconsole.log('Fetching semesters for department:',formData.department);const response=await departmentService.getSemestersByDepartment(formData.department);console.log('Semesters response:',response);if(response&&response.data){let semestersData=[];// Handle different response formats\nif(Array.isArray(response.data)){semestersData=response.data;}else if(response.data.results&&Array.isArray(response.data.results)){semestersData=response.data.results;}else if(response.data.semesters&&Array.isArray(response.data.semesters)){semestersData=response.data.semesters;}else{console.error('Unexpected response format:',response.data);setError('Failed to load semesters: Unexpected response format');setSemesters([]);return;}// Filter semesters to only show valid ones (1-8)\nconst filteredSemesters=semestersData.filter(sem=>{var _sem$name,_sem$semester_code;// Try to extract semester number from name or semester_code\nconst nameMatch=(_sem$name=sem.name)===null||_sem$name===void 0?void 0:_sem$name.match(/(\\d+)/);const codeMatch=(_sem$semester_code=sem.semester_code)===null||_sem$semester_code===void 0?void 0:_sem$semester_code.match(/(\\d+)/);let semNumber=null;if(nameMatch){semNumber=parseInt(nameMatch[1],10);}else if(codeMatch){semNumber=parseInt(codeMatch[1],10);}// If we can't extract a number, include it anyway (better to show all than none)\nif(semNumber===null){console.log('Could not extract semester number from:',sem);return true;// Include semester if we can't determine the number\n}return semNumber>=1&&semNumber<=8;});console.log('Filtered semesters:',filteredSemesters);setSemesters(filteredSemesters);}else{setError('Failed to load semesters: No response data');setSemesters([]);}}catch(error){console.error('Error fetching semesters:',error);setError('Failed to load semesters. Please check your connection and try again.');setSemesters([]);}};fetchSemesters();},[formData.department]);// Fetch courses when semester changes\nuseEffect(()=>{const fetchCourses=async()=>{if(formData.semester){try{setError(null);// Clear any previous errors\nconsole.log('Fetching courses for semester:',formData.semester);const response=await courseService.getAllCourses();console.log('Courses response:',response);if(response&&response.data){let coursesData=[];if(Array.isArray(response.data)){coursesData=response.data;}else if(response.data.results&&Array.isArray(response.data.results)){coursesData=response.data.results;}else{coursesData=response.data.courses||[];}// Filter courses by semester\nconst filteredCourses=coursesData.filter(course=>{var _course$semester_deta;// Check semester_details first, then semester field\nconst courseSemesterId=((_course$semester_deta=course.semester_details)===null||_course$semester_deta===void 0?void 0:_course$semester_deta.id)||course.semester;return courseSemesterId===formData.semester;});console.log('Filtered courses:',filteredCourses);setCourses(filteredCourses);}else{setError('Failed to load courses: No response data');}}catch(error){console.error('Error fetching courses:',error);setError('Failed to load courses. Please check your connection and try again.');}}else{setCourses([]);}};fetchCourses();},[formData.semester]);// Reset form when modal opens/closes or studentId changes\nuseEffect(()=>{if(isOpen){if(studentId){const fetchStudentData=async()=>{setIsLoading(true);try{const response=await studentService.getStudentById(studentId);const student=response.data;setFormData({first_name:student.first_name||'',last_name:student.last_name||'',email:student.email||'',password:'',registration_number:student.registration_number||'',department:student.department?student.department.id:0,semester:student.semester?student.semester.id:0,batch:student.batch||'',guardian_name:student.guardian_name||'',guardian_contact:student.guardian_contact||'',address:student.address||'',date_of_birth:student.date_of_birth?new Date(student.date_of_birth).toISOString().split('T')[0]:'',gender:student.gender||'male',blood_group:student.blood_group||'',phone:student.phone||''});if(student.image){setImagePreview(student.image);}}catch(error){setError('Failed to fetch student data');}finally{setIsLoading(false);}};fetchStudentData();}else{// Reset form for new student\nsetFormData({first_name:'',last_name:'',email:'',password:'',registration_number:'',department:preSelectedDepartment||0,semester:0,batch:'',guardian_name:'',guardian_contact:'',address:'',date_of_birth:'',gender:'male',blood_group:'',phone:''});setImageFile(null);setImagePreview(undefined);setError(null);}}},[studentId,isOpen,preSelectedDepartment]);const handleChange=e=>{const{name,value}=e.target;if(name==='department'||name==='semester'){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value?parseInt(value,10):0}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));}};const handleImageChange=e=>{if(e.target.files&&e.target.files[0]){const file=e.target.files[0];setImageFile(file);setImagePreview(URL.createObjectURL(file));}};const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError(null);try{// Validation\nif(!formData.first_name.trim()){setError('First name is required.');setIsLoading(false);return;}if(!formData.last_name.trim()){setError('Last name is required.');setIsLoading(false);return;}if(!formData.email.trim()){setError('Email is required.');setIsLoading(false);return;}if(!formData.phone.trim()){setError('Phone number is required.');setIsLoading(false);return;}if(!formData.date_of_birth){setError('Date of birth is required.');setIsLoading(false);return;}if(!formData.registration_number.trim()){setError('Registration number is required.');setIsLoading(false);return;}if(!formData.department||formData.department===0){setError('Please select a department.');setIsLoading(false);return;}if(!formData.semester||formData.semester===0){setError('Please select a semester.');setIsLoading(false);return;}if(!studentId&&!formData.password.trim()){setError('Password is required for new students.');setIsLoading(false);return;}// Prepare data for submission\nconst dataToSend={first_name:formData.first_name,last_name:formData.last_name,email:formData.email,phone:formData.phone,date_of_birth:formData.date_of_birth,registration_number:formData.registration_number,department_id:parseInt(formData.department.toString(),10),guardian_name:formData.guardian_name||null,guardian_contact:formData.guardian_contact||null,address:formData.address||null,gender:formData.gender,blood_group:formData.blood_group||null,batch:formData.batch||null};// Add password only for new students\nif(!studentId&&formData.password.trim()){dataToSend.password=formData.password;}// Add semester if selected\nif(formData.semester&&formData.semester!==0){dataToSend.semester_id=parseInt(formData.semester.toString(),10);}console.log('Form data before submission:',formData);console.log('Data to send:',dataToSend);let response;if(studentId){response=await studentService.updateStudent(studentId,dataToSend);}else{response=await studentService.createStudent(dataToSend);}console.log('API Response:',response);// Handle image upload if there's an image file\nif(imageFile&&(response.data.id||response.data.student_id)){const studentId=response.data.id||response.data.student_id;const imageFormData=new FormData();imageFormData.append('image',imageFile);await studentService.uploadStudentImage(studentId,imageFormData);const updatedStudentResponse=await studentService.getStudentById(studentId);if(updatedStudentResponse.data.image){setImagePreview(updatedStudentResponse.data.image);}}onSuccess();onClose();}catch(error){var _error$response5,_error$response6,_error$response6$data,_error$response7,_error$response7$data;console.error('Error submitting form:',error);console.error('Error response:',(_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.data);setError(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.error)||'Failed to save student');}finally{setIsLoading(false);}};if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:studentId?'Edit Student':'Add New Student'}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden mb-2\",children:imagePreview?/*#__PURE__*/_jsx(\"img\",{src:imagePreview,alt:\"Preview\",className:\"w-full h-full object-cover\"}):/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-16 w-16 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"})})}),/*#__PURE__*/_jsxs(\"label\",{className:\"cursor-pointer bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm transition-colors\",children:[\"Upload Photo\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",className:\"hidden\",onChange:handleImageChange})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"first_name\",children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{id:\"first_name\",name:\"first_name\",type:\"text\",required:true,value:formData.first_name,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"last_name\",children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{id:\"last_name\",name:\"last_name\",type:\"text\",required:true,value:formData.last_name,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"email\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",required:true,value:formData.email,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"password\",children:studentId?'Password (leave blank to keep current)':'Password *'}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",required:!studentId,value:formData.password,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"registration_number\",children:\"Registration Number *\"}),/*#__PURE__*/_jsx(\"input\",{id:\"registration_number\",name:\"registration_number\",type:\"text\",required:true,value:formData.registration_number,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"batch\",children:\"Batch\"}),/*#__PURE__*/_jsx(\"input\",{id:\"batch\",name:\"batch\",type:\"text\",value:formData.batch,onChange:handleChange,placeholder:\"e.g., 2025-2029\",className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"department\",children:\"Department *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"department\",name:\"department\",required:true,value:formData.department||\"\",onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline \".concat(departments.length===0?'bg-gray-100':''),disabled:departments.length===0,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Department\"}),departments.length>0?departments.map(dept=>/*#__PURE__*/_jsxs(\"option\",{value:dept.id,children:[dept.name,\" (\",dept.code,\")\"]},dept.id)):/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:error?'Failed to load departments':'Loading departments...'})]}),departments.length===0&&!error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-500 text-xs italic mt-1\",children:\"Loading departments...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs italic mt-1\",children:error})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"semester\",children:\"Semester *\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"semester\",name:\"semester\",required:true,value:formData.semester||\"\",onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline \".concat(semesters.length===0?'bg-gray-100':''),disabled:semesters.length===0||!formData.department,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Semester\"}),semesters.length>0?semesters.map(semester=>/*#__PURE__*/_jsxs(\"option\",{value:semester.id,children:[semester.name,\" (\",semester.semester_code,\")\"]},semester.id)):/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:formData.department?'Loading semesters...':'Select department first'})]}),semesters.length===0&&formData.department&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-blue-500 text-xs italic mt-1\",children:[\"Debug: Department \",formData.department,\" selected, but no semesters loaded\"]}),semesters.length===0&&!error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-500 text-xs italic mt-1\",children:formData.department?'Loading semesters...':'Please select a department first'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"date_of_birth\",children:\"Date of Birth\"}),/*#__PURE__*/_jsx(\"input\",{id:\"date_of_birth\",name:\"date_of_birth\",type:\"date\",value:formData.date_of_birth,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"gender\",children:\"Gender\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"gender\",name:\"gender\",value:formData.gender,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"blood_group\",children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"input\",{id:\"blood_group\",name:\"blood_group\",type:\"text\",value:formData.blood_group,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"phone\",children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{id:\"phone\",name:\"phone\",type:\"tel\",value:formData.phone,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"guardian_name\",children:\"Guardian Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"guardian_name\",name:\"guardian_name\",type:\"text\",value:formData.guardian_name,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"guardian_contact\",children:\"Guardian Contact\"}),/*#__PURE__*/_jsx(\"input\",{id:\"guardian_contact\",name:\"guardian_contact\",type:\"text\",value:formData.guardian_contact,onChange:handleChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm font-bold mb-2\",htmlFor:\"address\",children:\"Address\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"address\",name:\"address\",rows:3,value:formData.address,onChange:handleChange,placeholder:\"Enter student's full address\",className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-2\",children:\"Assigned Courses\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside max-h-48 overflow-y-auto border border-gray-300 rounded p-3 bg-gray-50\",children:courses.map(course=>/*#__PURE__*/_jsxs(\"li\",{className:\"text-gray-700\",children:[course.name,\" (\",course.code,\")\"]},course.course_id))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",disabled:isLoading,className:\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors flex items-center\",children:[isLoading&&/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),studentId?'Update Student':'Add Student']})]})]})]})})});};export default StudentModal;","map":{"version":3,"names":["React","useState","useEffect","studentService","departmentService","courseService","jsx","_jsx","jsxs","_jsxs","StudentModal","_ref","isOpen","onClose","studentId","onSuccess","preSelectedDepartment","isLoading","setIsLoading","error","setError","departments","setDepartments","semesters","setSemesters","courses","setCourses","imageFile","setImageFile","imagePreview","setImagePreview","undefined","formData","setFormData","first_name","last_name","email","password","registration_number","department","semester","batch","guardian_name","guardian_contact","address","date_of_birth","gender","blood_group","phone","fetchDepartments","console","log","response","getAllDepartments","data","departmentsData","Array","isArray","results","validDepartments","filter","dept","id","name","length","prev","_objectSpread","_error$response","_error$response2","_error$response3","_error$response4","status","fetchSemesters","getSemestersByDepartment","semestersData","filteredSemesters","sem","_sem$name","_sem$semester_code","nameMatch","match","codeMatch","semester_code","semNumber","parseInt","fetchCourses","getAllCourses","coursesData","filteredCourses","course","_course$semester_deta","courseSemesterId","semester_details","fetchStudentData","getStudentById","student","Date","toISOString","split","image","handleChange","e","value","target","handleImageChange","files","file","URL","createObjectURL","handleSubmit","preventDefault","trim","dataToSend","department_id","toString","semester_id","updateStudent","createStudent","student_id","imageFormData","FormData","append","uploadStudentImage","updatedStudentResponse","_error$response5","_error$response6","_error$response6$data","_error$response7","_error$response7$data","message","className","children","onClick","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onSubmit","src","alt","type","accept","onChange","htmlFor","required","placeholder","concat","disabled","map","code","rows","course_id","cx","cy","r"],"sources":["c:/UMI/Frontend/src/components/modals/StudentModal.tsx"],"sourcesContent":["import React, { useState, useEffect, JSX } from 'react';\nimport { studentService, departmentService, semesterService, courseService } from '../../api/apiService';\n\ninterface Semester {\n  id: number;\n  name: string;\n  semester_code: string;\n  department: number;\n  program?: string;\n  capacity?: number;\n}\n\ninterface Course {\n  course_id: number;\n  name: string;\n  code: string;\n  semester?: number;\n  semester_details?: {\n    id: number;\n    name: string;\n    semester_code: string;\n  };\n}\n\ninterface StudentModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  studentId?: number;\n  onSuccess: () => void;\n  preSelectedDepartment?: number; // Optional prop to pre-select department\n  preSelectedSemester?: number; // Optional prop to pre-select semester\n}\n\ninterface Department {\n  id: number;\n  name: string;\n  code: string;\n  description?: string;\n}\n\nconst StudentModal: React.FC<StudentModalProps> = ({ isOpen, onClose, studentId, onSuccess, preSelectedDepartment }): JSX.Element | null => {\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [departments, setDepartments] = useState<Department[]>([]);\n  const [semesters, setSemesters] = useState<Semester[]>([]);\n  const [courses, setCourses] = useState<Course[]>([]);\n  const [imageFile, setImageFile] = useState<File | null>(null);\n  const [imagePreview, setImagePreview] = useState<string | undefined>(undefined);\n\n  const [formData, setFormData] = useState({\n    first_name: '',\n    last_name: '',\n    email: '',\n    password: '',\n    registration_number: '',\n    department: 0, // Department field\n    semester: 0, // Semester field\n    batch: '', // Batch field\n    guardian_name: '',\n    guardian_contact: '',\n    address: '',\n    date_of_birth: '',\n    gender: 'male',\n    blood_group: '',\n    phone: '',\n  });\n\n  // Fetch departments\n  useEffect(() => {\n    const fetchDepartments = async (): Promise<void> => {\n      try {\n        setError(null); // Clear any previous errors\n        console.log('Fetching departments...'); // Debug log\n        const response = await departmentService.getAllDepartments();\n        console.log('Departments response:', response); // Debug log\n        console.log('Departments data:', response.data); // Debug log\n\n        if (response && response.data) {\n          let departmentsData: Department[] = [];\n\n          if (Array.isArray(response.data)) {\n            departmentsData = response.data;\n          } else if (response.data.results && Array.isArray(response.data.results)) {\n            // Handle paginated response\n            departmentsData = response.data.results;\n          } else {\n            // Try to extract departments from any structure\n            departmentsData = response.data.departments || [];\n          }\n\n          // Validate department data structure\n          const validDepartments = departmentsData.filter(dept =>\n            dept &&\n            typeof dept === 'object' &&\n            dept.id &&\n            dept.name\n          );\n\n          if (validDepartments.length > 0) {\n            setDepartments(validDepartments);\n            console.log('Departments loaded successfully:', validDepartments.length, 'departments');\n\n            // Set pre-selected department if provided\n            if (preSelectedDepartment) {\n              setFormData(prev => ({ ...prev, department: preSelectedDepartment }));\n            }\n          } else {\n            setError('No valid departments found');\n            console.error('No valid departments in response:', response.data);\n          }\n        } else {\n          setError('Failed to load departments: No response data');\n          console.error('No response data received');\n        }\n      } catch (error: any) {\n        console.error('Error fetching departments:', error);\n        console.error('Error response:', error.response);\n        console.error('Error status:', error.response?.status);\n        console.error('Error data:', error.response?.data);\n\n        if (error.response?.status === 401) {\n          setError('Authentication required. Please login first.');\n        } else if (error.response?.status === 403) {\n          setError('Access denied. You do not have permission to view departments.');\n        } else {\n          setError('Failed to load departments. Please check your connection and try again.');\n        }\n      }\n    };\n\n    if (isOpen) {\n      fetchDepartments();\n    }\n  }, [preSelectedDepartment, isOpen]);\n\n  // Fetch semesters when department changes\n  useEffect(() => {\n    const fetchSemesters = async () => {\n      if (!formData.department) {\n        setSemesters([]);\n        return;\n      }\n\n      try {\n        setError(null); // Clear any previous errors\n        console.log('Fetching semesters for department:', formData.department);\n        const response = await departmentService.getSemestersByDepartment(formData.department);\n        console.log('Semesters response:', response);\n\n        if (response && response.data) {\n          let semestersData: Semester[] = [];\n\n          // Handle different response formats\n          if (Array.isArray(response.data)) {\n            semestersData = response.data;\n          } else if (response.data.results && Array.isArray(response.data.results)) {\n            semestersData = response.data.results;\n          } else if (response.data.semesters && Array.isArray(response.data.semesters)) {\n            semestersData = response.data.semesters;\n          } else {\n            console.error('Unexpected response format:', response.data);\n            setError('Failed to load semesters: Unexpected response format');\n            setSemesters([]);\n            return;\n          }\n\n          // Filter semesters to only show valid ones (1-8)\n          const filteredSemesters = semestersData.filter((sem: any) => {\n            // Try to extract semester number from name or semester_code\n            const nameMatch = sem.name?.match(/(\\d+)/);\n            const codeMatch = sem.semester_code?.match(/(\\d+)/);\n\n            let semNumber = null;\n            if (nameMatch) {\n              semNumber = parseInt(nameMatch[1], 10);\n            } else if (codeMatch) {\n              semNumber = parseInt(codeMatch[1], 10);\n            }\n\n            // If we can't extract a number, include it anyway (better to show all than none)\n            if (semNumber === null) {\n              console.log('Could not extract semester number from:', sem);\n              return true; // Include semester if we can't determine the number\n            }\n\n            return semNumber >= 1 && semNumber <= 8;\n          });\n\n          console.log('Filtered semesters:', filteredSemesters);\n          setSemesters(filteredSemesters);\n        } else {\n          setError('Failed to load semesters: No response data');\n          setSemesters([]);\n        }\n      } catch (error: any) {\n        console.error('Error fetching semesters:', error);\n        setError('Failed to load semesters. Please check your connection and try again.');\n        setSemesters([]);\n      }\n    };\n\n    fetchSemesters();\n  }, [formData.department]);\n\n  // Fetch courses when semester changes\n  useEffect(() => {\n    const fetchCourses = async () => {\n      if (formData.semester) {\n        try {\n          setError(null); // Clear any previous errors\n          console.log('Fetching courses for semester:', formData.semester);\n          const response = await courseService.getAllCourses();\n          console.log('Courses response:', response);\n\n          if (response && response.data) {\n            let coursesData: Course[] = [];\n\n            if (Array.isArray(response.data)) {\n              coursesData = response.data;\n            } else if (response.data.results && Array.isArray(response.data.results)) {\n              coursesData = response.data.results;\n            } else {\n              coursesData = response.data.courses || [];\n            }\n\n            // Filter courses by semester\n            const filteredCourses = coursesData.filter((course: Course) => {\n              // Check semester_details first, then semester field\n              const courseSemesterId = course.semester_details?.id || course.semester;\n              return courseSemesterId === formData.semester;\n            });\n\n            console.log('Filtered courses:', filteredCourses);\n            setCourses(filteredCourses);\n          } else {\n            setError('Failed to load courses: No response data');\n          }\n        } catch (error: any) {\n          console.error('Error fetching courses:', error);\n          setError('Failed to load courses. Please check your connection and try again.');\n        }\n      } else {\n        setCourses([]);\n      }\n    };\n\n    fetchCourses();\n  }, [formData.semester]);\n\n  // Reset form when modal opens/closes or studentId changes\n  useEffect(() => {\n    if (isOpen) {\n      if (studentId) {\n        const fetchStudentData = async () => {\n          setIsLoading(true);\n          try {\n            const response = await studentService.getStudentById(studentId);\n            const student = response.data;\n\n            setFormData({\n              first_name: student.first_name || '',\n              last_name: student.last_name || '',\n              email: student.email || '',\n              password: '',\n              registration_number: student.registration_number || '',\n              department: student.department ? student.department.id : 0,\n              semester: student.semester ? student.semester.id : 0,\n              batch: student.batch || '',\n              guardian_name: student.guardian_name || '',\n              guardian_contact: student.guardian_contact || '',\n              address: student.address || '',\n              date_of_birth: student.date_of_birth ? new Date(student.date_of_birth).toISOString().split('T')[0] : '',\n              gender: student.gender || 'male',\n              blood_group: student.blood_group || '',\n              phone: student.phone || '',\n            });\n\n            if (student.image) {\n              setImagePreview(student.image);\n            }\n          } catch (error) {\n            setError('Failed to fetch student data');\n          } finally {\n            setIsLoading(false);\n          }\n        };\n\n        fetchStudentData();\n      } else {\n        // Reset form for new student\n        setFormData({\n          first_name: '',\n          last_name: '',\n          email: '',\n          password: '',\n          registration_number: '',\n          department: preSelectedDepartment || 0,\n          semester: 0,\n          batch: '',\n          guardian_name: '',\n          guardian_contact: '',\n          address: '',\n          date_of_birth: '',\n          gender: 'male',\n          blood_group: '',\n          phone: '',\n        });\n        setImageFile(null);\n        setImagePreview(undefined);\n        setError(null);\n      }\n    }\n  }, [studentId, isOpen, preSelectedDepartment]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>): void => {\n    const { name, value } = e.target;\n    if (name === 'department' || name === 'semester') {\n      setFormData(prev => ({ ...prev, [name]: value ? parseInt(value, 10) : 0 }));\n    } else {\n      setFormData(prev => ({ ...prev, [name]: value }));\n    }\n  };\n\n  const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const file = e.target.files[0];\n      setImageFile(file);\n      setImagePreview(URL.createObjectURL(file));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      // Validation\n      if (!formData.first_name.trim()) {\n        setError('First name is required.');\n        setIsLoading(false);\n        return;\n      }\n      if (!formData.last_name.trim()) {\n        setError('Last name is required.');\n        setIsLoading(false);\n        return;\n      }\n      if (!formData.email.trim()) {\n        setError('Email is required.');\n        setIsLoading(false);\n        return;\n      }\n      if (!formData.phone.trim()) {\n        setError('Phone number is required.');\n        setIsLoading(false);\n        return;\n      }\n      if (!formData.date_of_birth) {\n        setError('Date of birth is required.');\n        setIsLoading(false);\n        return;\n      }\n      if (!formData.registration_number.trim()) {\n        setError('Registration number is required.');\n        setIsLoading(false);\n        return;\n      }\n      if (!formData.department || formData.department === 0) {\n        setError('Please select a department.');\n        setIsLoading(false);\n        return;\n      }\n      if (!formData.semester || formData.semester === 0) {\n        setError('Please select a semester.');\n        setIsLoading(false);\n        return;\n      }\n      if (!studentId && !formData.password.trim()) {\n        setError('Password is required for new students.');\n        setIsLoading(false);\n        return;\n      }\n\n      // Prepare data for submission\n      const dataToSend: any = {\n        first_name: formData.first_name,\n        last_name: formData.last_name,\n        email: formData.email,\n        phone: formData.phone,\n        date_of_birth: formData.date_of_birth,\n        registration_number: formData.registration_number,\n        department_id: parseInt(formData.department.toString(), 10),\n        guardian_name: formData.guardian_name || null,\n        guardian_contact: formData.guardian_contact || null,\n        address: formData.address || null,\n        gender: formData.gender,\n        blood_group: formData.blood_group || null,\n        batch: formData.batch || null,\n      };\n\n      // Add password only for new students\n      if (!studentId && formData.password.trim()) {\n        dataToSend.password = formData.password;\n      }\n\n      // Add semester if selected\n      if (formData.semester && formData.semester !== 0) {\n        dataToSend.semester_id = parseInt(formData.semester.toString(), 10);\n      }\n\n      console.log('Form data before submission:', formData);\n      console.log('Data to send:', dataToSend);\n\n      let response;\n      if (studentId) {\n        response = await studentService.updateStudent(studentId, dataToSend);\n      } else {\n        response = await studentService.createStudent(dataToSend);\n      }\n\n      console.log('API Response:', response);\n\n      // Handle image upload if there's an image file\n      if (imageFile && (response.data.id || response.data.student_id)) {\n        const studentId = response.data.id || response.data.student_id;\n        const imageFormData = new FormData();\n        imageFormData.append('image', imageFile);\n        await studentService.uploadStudentImage(studentId, imageFormData);\n        const updatedStudentResponse = await studentService.getStudentById(studentId);\n        if (updatedStudentResponse.data.image) {\n          setImagePreview(updatedStudentResponse.data.image);\n        }\n      }\n\n      onSuccess();\n      onClose();\n    } catch (error: any) {\n      console.error('Error submitting form:', error);\n      console.error('Error response:', error.response?.data);\n      setError(error.response?.data?.message || error.response?.data?.error || 'Failed to save student');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-6\">\n            <h2 className=\"text-2xl font-bold text-gray-800\">\n              {studentId ? 'Edit Student' : 'Add New Student'}\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-500 hover:text-gray-700\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n              </svg>\n            </button>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit}>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"md:col-span-1\">\n                <div className=\"mb-6\">\n                  <label className=\"block text-gray-700 text-sm font-bold mb-2\">\n                    Profile Picture\n                  </label>\n                  <div className=\"flex flex-col items-center\">\n                    <div className=\"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden mb-2\">\n                      {imagePreview ? (\n                        <img src={imagePreview} alt=\"Preview\" className=\"w-full h-full object-cover\" />\n                      ) : (\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                        </svg>\n                      )}\n                    </div>\n                    <label className=\"cursor-pointer bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded-md text-sm transition-colors\">\n                      Upload Photo\n                      <input\n                        type=\"file\"\n                        accept=\"image/*\"\n                        className=\"hidden\"\n                        onChange={handleImageChange}\n                      />\n                    </label>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"first_name\">\n                      First Name *\n                    </label>\n                    <input\n                      id=\"first_name\"\n                      name=\"first_name\"\n                      type=\"text\"\n                      required\n                      value={formData.first_name}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"last_name\">\n                      Last Name *\n                    </label>\n                    <input\n                      id=\"last_name\"\n                      name=\"last_name\"\n                      type=\"text\"\n                      required\n                      value={formData.last_name}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"email\">\n                      Email *\n                    </label>\n                    <input\n                      id=\"email\"\n                      name=\"email\"\n                      type=\"email\"\n                      required\n                      value={formData.email}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"password\">\n                      {studentId ? 'Password (leave blank to keep current)' : 'Password *'}\n                    </label>\n                    <input\n                      id=\"password\"\n                      name=\"password\"\n                      type=\"password\"\n                      required={!studentId}\n                      value={formData.password}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"registration_number\">\n                      Registration Number *\n                    </label>\n                    <input\n                      id=\"registration_number\"\n                      name=\"registration_number\"\n                      type=\"text\"\n                      required\n                      value={formData.registration_number}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"batch\">\n                      Batch\n                    </label>\n                    <input\n                      id=\"batch\"\n                      name=\"batch\"\n                      type=\"text\"\n                      value={formData.batch}\n                      onChange={handleChange}\n                      placeholder=\"e.g., 2025-2029\"\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"department\">\n                      Department *\n                    </label>\n                    <select\n                      id=\"department\"\n                      name=\"department\"\n                      required\n                      value={formData.department || \"\"}\n                      onChange={handleChange}\n                      className={`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${departments.length === 0 ? 'bg-gray-100' : ''}`}\n                      disabled={departments.length === 0}\n                    >\n                      <option value=\"\">Select Department</option>\n                      {departments.length > 0 ? (\n                        departments.map(dept => (\n                          <option key={dept.id} value={dept.id}>\n                            {dept.name} ({dept.code})\n                          </option>\n                        ))\n                      ) : (\n                        <option value=\"\" disabled>\n                          {error ? 'Failed to load departments' : 'Loading departments...'}\n                        </option>\n                      )}\n                    </select>\n                    {departments.length === 0 && !error && (\n                      <p className=\"text-blue-500 text-xs italic mt-1\">Loading departments...</p>\n                    )}\n                    {error && (\n                      <p className=\"text-red-500 text-xs italic mt-1\">{error}</p>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"semester\">\n                      Semester *\n                    </label>\n                    <select\n                      id=\"semester\"\n                      name=\"semester\"\n                      required\n                      value={formData.semester || \"\"}\n                      onChange={handleChange}\n                      className={`shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ${semesters.length === 0 ? 'bg-gray-100' : ''}`}\n                      disabled={semesters.length === 0 || !formData.department}\n                    >\n                      <option value=\"\">Select Semester</option>\n                      {semesters.length > 0 ? (\n                        semesters.map(semester => (\n                          <option key={semester.id} value={semester.id}>\n                            {semester.name} ({semester.semester_code})\n                          </option>\n                        ))\n                      ) : (\n                        <option value=\"\" disabled>\n                          {formData.department ? 'Loading semesters...' : 'Select department first'}\n                        </option>\n                      )}\n                    </select>\n                    {semesters.length === 0 && formData.department && (\n                      <p className=\"text-blue-500 text-xs italic mt-1\">\n                        Debug: Department {formData.department} selected, but no semesters loaded\n                      </p>\n                    )}\n                    {semesters.length === 0 && !error && (\n                      <p className=\"text-blue-500 text-xs italic mt-1\">\n                        {formData.department ? 'Loading semesters...' : 'Please select a department first'}\n                      </p>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"date_of_birth\">\n                      Date of Birth\n                    </label>\n                    <input\n                      id=\"date_of_birth\"\n                      name=\"date_of_birth\"\n                      type=\"date\"\n                      value={formData.date_of_birth}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"gender\">\n                      Gender\n                    </label>\n                    <select\n                      id=\"gender\"\n                      name=\"gender\"\n                      value={formData.gender}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    >\n                      <option value=\"male\">Male</option>\n                      <option value=\"female\">Female</option>\n                      <option value=\"other\">Other</option>\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"blood_group\">\n                      Blood Group\n                    </label>\n                    <input\n                      id=\"blood_group\"\n                      name=\"blood_group\"\n                      type=\"text\"\n                      value={formData.blood_group}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"phone\">\n                      Phone\n                    </label>\n                    <input\n                      id=\"phone\"\n                      name=\"phone\"\n                      type=\"tel\"\n                      value={formData.phone}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"guardian_name\">\n                      Guardian Name\n                    </label>\n                    <input\n                      id=\"guardian_name\"\n                      name=\"guardian_name\"\n                      type=\"text\"\n                      value={formData.guardian_name}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"guardian_contact\">\n                      Guardian Contact\n                    </label>\n                    <input\n                      id=\"guardian_contact\"\n                      name=\"guardian_contact\"\n                      type=\"text\"\n                      value={formData.guardian_contact}\n                      onChange={handleChange}\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n\n                  <div className=\"md:col-span-2\">\n                    <label className=\"block text-gray-700 text-sm font-bold mb-2\" htmlFor=\"address\">\n                      Address\n                    </label>\n                    <textarea\n                      id=\"address\"\n                      name=\"address\"\n                      rows={3}\n                      value={formData.address}\n                      onChange={handleChange}\n                      placeholder=\"Enter student's full address\"\n                      className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"mt-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">Assigned Courses</h3>\n                  <ul className=\"list-disc list-inside max-h-48 overflow-y-auto border border-gray-300 rounded p-3 bg-gray-50\">\n                    {courses.map(course => (\n                      <li key={course.course_id} className=\"text-gray-700\">\n                        {course.name} ({course.code})\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-8 flex justify-end space-x-3\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isLoading}\n                className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors flex items-center\"\n              >\n                {isLoading && (\n                  <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                )}\n                {studentId ? 'Update Student' : 'Add Student'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default StudentModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}