# Generated by Django 5.2.5 on 2025-09-25 05:05

from django.db import migrations


def assign_courses_to_results(apps, schema_editor):
    Result = apps.get_model('academics', 'Result')

    # Get all results with null course
    results_without_course = Result.objects.filter(course__isnull=True)

    for result in results_without_course:
        # Get the student's courses
        student_courses = result.student.courses.all()
        if student_courses.exists():
            # Assign the first course
            result.course = student_courses.first()
            result.save()


class Migration(migrations.Migration):

    dependencies = [
        ('academics', '0013_update_existing_results'),
    ]

    operations = [
        migrations.RunPython(assign_courses_to_results),
    ]
